<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yesim Universal - eSIM App</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Inter', sans-serif;
      background: #FAFAFA;
      color: #1A1A1A;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* –°–∫—Ä—ã—Ç–∏–µ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ */
    * {
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE –∏ Edge */
    }
    
    *::-webkit-scrollbar {
      display: none; /* Chrome, Safari, Opera */
    }
    
    .container {
      max-width: 428px;
      margin: 0 auto;
      background: white;
      min-height: 100vh;
      position: relative;
    }
    
    .screen {
      display: none;
    }
    
    .screen.active {
      display: block;
    }
    
    .header {
      background: linear-gradient(135deg, #F97316 0%, #FB923C 100%);
      color: white;
      padding: 50px 20px 24px;
      border-radius: 0 0 28px 28px;
      position: relative;
      box-shadow: 0 4px 20px rgba(249, 115, 22, 0.2);
    }
    
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      width: 100%;
    }
    
    .header-top > div:first-child {
      flex: 1;
    }
    
    #profileScreen .header-top {
      display: flex !important;
      justify-content: space-between !important;
      align-items: flex-start !important;
      width: 100% !important;
      gap: 12px;
    }
    
    #profileScreen .header-top > div:first-child {
      flex: 1;
      min-width: 0;
    }
    
    #profileScreen .burger-btn {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      width: 44px !important;
      height: 44px !important;
      flex-shrink: 0 !important;
    }
    
    .header h1 {
      font-size: 26px;
      font-weight: 700;
      margin-bottom: 4px;
      letter-spacing: -0.3px;
    }
    
    .header p {
      font-size: 14px;
      opacity: 0.95;
      font-weight: 400;
    }
    
    .map-btn {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      margin-left: 12px;
      transition: all 0.2s;
      border: 1px solid rgba(255,255,255,0.25);
    }
    
    .map-btn:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .content {
      padding: 16px;
    }
    
    .card {
      background: white;
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      border: 1px solid #F0F0F0;
      transition: all 0.2s ease;
    }
    
    .card:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .section-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 12px;
      color: #1A1A1A;
      padding: 0 4px;
    }
    
    .country-card {
      display: flex;
      align-items: center;
      padding: 14px 16px;
      background: white;
      border-radius: 14px;
      margin-bottom: 10px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
      cursor: pointer;
      transition: all 0.2s ease;
      border: 1px solid #F0F0F0;
      min-height: 68px;
    }
    
    #mapScreen .country-card {
      background: white;
      border-color: #E5E7EB;
      color: #1A1A1A;
    }
    
    #mapScreen .country-name {
      color: #1A1A1A;
    }
    
    #mapScreen .country-region {
      color: #666;
    }
    
    .country-card:hover {
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15);
      border-color: #F97316;
      transform: translateY(-1px);
    }
    
    .country-card.selected {
      border: 2px solid #F97316;
      background: linear-gradient(135deg, #FFF7ED 0%, #FFF4E6 100%);
      box-shadow: 0 2px 8px rgba(249, 115, 22, 0.2);
    }
    
    #mapScreen .country-card.selected {
      background: linear-gradient(135deg, #FFF7ED 0%, #FFF4E6 100%);
      border-color: #F97316;
    }
    
    .flag {
      font-size: 32px;
      margin-right: 12px;
      flex-shrink: 0;
    }
    
    .country-info {
      flex: 1;
      min-width: 0;
    }
    
    .country-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 2px;
      color: #1A1A1A;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .country-region {
      font-size: 13px;
      color: #666;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .country-price {
      font-size: 16px;
      font-weight: 700;
      color: #F97316;
      white-space: nowrap;
      margin-left: 12px;
      flex-shrink: 0;
    }
    
    .country-price-label {
      font-size: 11px;
      color: #999;
      font-weight: 400;
      display: block;
      margin-top: 2px;
    }
    
    .btn {
      background: linear-gradient(135deg, #F97316 0%, #FB923C 100%);
      color: white;
      border: none;
      padding: 16px 24px;
      border-radius: 14px;
      font-size: 16px;
      font-weight: 600;
      width: 100%;
      cursor: pointer;
      margin-top: 16px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
      letter-spacing: -0.2px;
    }
    
    .btn:hover {
      background: linear-gradient(135deg, #EA580C 0%, #F97316 100%);
      box-shadow: 0 6px 20px rgba(249, 115, 22, 0.4);
      transform: translateY(-1px);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
    }
    
    .btn-outline {
      background: white;
      border: 2px solid #E5E5E5;
      color: #1A1A1A;
      box-shadow: none;
    }
    
    .btn-outline:hover {
      background: #F5F5F5;
      border-color: #F97316;
      color: #F97316;
    }
    
    .search {
      width: 100%;
      padding: 14px 16px 14px 48px;
      border: 2px solid #F97316;
      border-radius: 12px;
      font-size: 15px;
      margin-bottom: 0;
      background: #FFF7ED;
      color: #1A1A1A;
      transition: all 0.2s;
      box-sizing: border-box;
    }
    
    .search:focus {
      outline: none;
      border-color: #F97316;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.15);
      background: white;
    }
    
    .search-wrapper {
      position: relative;
      width: 100%;
      margin-bottom: 16px;
    }
    
    .search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      pointer-events: none;
      color: #F97316;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .search-suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 2px solid #F97316;
      border-top: none;
      border-radius: 0 0 12px 12px;
      max-height: 300px;
      overflow-y: auto;
      z-index: 100;
      display: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      margin-top: -2px;
    }
    
    .search-suggestions.show {
      display: block;
    }
    
    .suggestion-item {
      padding: 12px 16px 12px 48px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid #F0F0F0;
      transition: background 0.2s;
    }
    
    .suggestion-item:last-child {
      border-bottom: none;
    }
    
    .suggestion-item:hover {
      background: #FFF7ED;
    }
    
    .suggestion-item .flag {
      font-size: 24px;
      flex-shrink: 0;
    }
    
    .suggestion-item .suggestion-name {
      font-size: 15px;
      font-weight: 600;
      color: #1A1A1A;
    }
    
    .suggestion-item .suggestion-region {
      font-size: 13px;
      color: #666;
      margin-left: auto;
    }
    
    .info-section {
      background: white;
      padding: 16px;
      border-radius: 12px;
      margin-top: 16px;
      border: 1px solid #E5E5E5;
    }
    
    .info-item {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
    }
    
    .info-item:last-child {
      margin-bottom: 0;
    }
    
    .info-icon {
      width: 20px;
      height: 20px;
      margin-right: 12px;
      flex-shrink: 0;
    }
    
    .tabs {
      display: flex;
      background: white;
      border-top: 1px solid #F0F0F0;
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 428px;
      z-index: 100;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
      backdrop-filter: blur(10px);
    }
    
    .tab {
      flex: 1;
      padding: 10px 4px;
      text-align: center;
      cursor: pointer;
      color: #999;
      font-size: 11px;
      font-weight: 600;
      transition: all 0.2s ease;
      letter-spacing: -0.1px;
    }
    
    .tab.active {
      color: #F97316;
    }
    
    .tab:hover {
      color: #F97316;
    }
    
    .tab-icon {
      width: 24px;
      height: 24px;
      margin: 0 auto 6px;
      display: block;
      transition: all 0.2s ease;
    }
    
    .tab.active .tab-icon {
      transform: scale(1.05);
    }
    
    .icon {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
    }
    
    .icon svg {
      width: 100%;
      height: 100%;
    }
    
    .content-wrapper {
      padding-bottom: 70px;
    }
    
    /* –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é */
    .burger-btn {
      width: 44px !important;
      height: 44px !important;
      min-width: 44px !important;
      min-height: 44px !important;
      border-radius: 12px;
      background: rgba(255,255,255,0.2) !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid rgba(255,255,255,0.25) !important;
      flex-shrink: 0 !important;
      position: relative;
      z-index: 10;
      margin-left: 12px;
      padding: 0 !important;
      box-sizing: border-box;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .burger-btn svg {
      width: 24px !important;
      height: 24px !important;
      display: block !important;
      stroke: white !important;
    }
    
    .burger-btn:hover {
      background: rgba(255,255,255,0.3) !important;
    }
    
    .burger-btn:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .burger-menu {
      position: fixed;
      top: 0;
      right: -100%;
      width: 85%;
      max-width: 360px;
      height: 100vh;
      background: white;
      z-index: 2000;
      transition: right 0.3s ease;
      box-shadow: -4px 0 20px rgba(0,0,0,0.15);
      overflow-y: auto;
    }
    
    .burger-menu.active {
      right: 0;
    }
    
    .burger-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1999;
      display: none;
      backdrop-filter: blur(2px);
    }
    
    .burger-overlay.active {
      display: block;
    }
    
    .burger-header {
      background: linear-gradient(135deg, #F97316 0%, #FB923C 100%);
      color: white;
      padding: 50px 20px 24px;
      position: relative;
    }
    
    .burger-close {
      position: absolute;
      top: 50px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.3);
      transition: all 0.2s;
    }
    
    .burger-close:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .burger-content {
      padding: 20px 0;
    }
    
    .burger-menu-item {
      display: flex;
      align-items: center;
      padding: 16px 20px;
      cursor: pointer;
      transition: all 0.2s;
      border-bottom: 1px solid #F0F0F0;
    }
    
    .burger-menu-item:hover {
      background: #FFF7ED;
    }
    
    .burger-menu-item:active {
      background: #FFF4E6;
    }
    
    .burger-menu-icon {
      width: 24px;
      height: 24px;
      margin-right: 16px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .burger-menu-text {
      flex: 1;
      font-size: 16px;
      font-weight: 500;
      color: #1A1A1A;
    }
    
    .burger-menu-arrow {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
      opacity: 0.5;
    }
    
    .burger-menu-section {
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px solid #E5E5E5;
    }
    
    .burger-menu-section-title {
      padding: 12px 20px 8px;
      font-size: 12px;
      font-weight: 600;
      color: #999;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .compatibility-card {
      border-left: 3px solid #10B981;
      padding-left: 16px;
      background: #F0FDF4;
      border-color: #10B981;
    }
    
    .filters {
      display: flex;
      gap: 8px;
      padding: 0 16px 12px;
      overflow-x: auto;
    }
    
    .filter-chip {
      padding: 8px 14px;
      border-radius: 20px;
      background: white;
      border: 1px solid #E5E5E5;
      white-space: nowrap;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      color: #666;
      transition: all 0.2s;
    }
    
    #mapScreen .filter-chip {
      background: white;
      border-color: #E5E7EB;
      color: #666;
    }
    
    .filter-chip.active {
      background: #F97316;
      border-color: #F97316;
      color: white;
    }
    
    #mapScreen .filter-chip.active {
      background: #F97316;
      border-color: #F97316;
      color: white;
    }
    
    .route-banner {
      background: #F97316;
      color: white;
      padding: 14px 16px;
      margin: 0 16px 12px;
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
      font-weight: 600;
    }
    
    .payment-method {
      display: flex;
      align-items: center;
      padding: 14px 16px;
      border-radius: 12px;
      background: white;
      border: 1px solid #E5E5E5;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .payment-method:hover {
      border-color: #F97316;
    }
    
    .payment-method.selected {
      border: 2px solid #F97316;
      background: #FFF7ED;
    }
    
    .payment-icon {
      width: 20px;
      height: 20px;
      margin-right: 12px;
      flex-shrink: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .payment-text {
      flex: 1;
      font-weight: 500;
      font-size: 15px;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(2px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .modal.active {
      display: flex;
    }
    
    #fullMapModal {
      padding: 0;
      background: white;
    }
    
    #fullMapModal .modal-content {
      width: 100%;
      height: 100vh;
      max-width: 100%;
      border-radius: 0;
      padding: 0;
    }
    
    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 24px;
      width: 100%;
      max-width: 400px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }
    
    .modal-title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 8px;
      color: #1A1A1A;
    }
    
    .modal-subtitle {
      font-size: 14px;
      color: #666;
      margin-bottom: 24px;
      line-height: 1.5;
    }
    
    .qr-container {
      padding: 20px;
      background: #F5F5F5;
      border-radius: 12px;
      margin-bottom: 20px;
      text-align: center;
      border: 1px solid #E5E5E5;
    }
    
    .qr-code {
      width: 240px;
      height: 240px;
      background: white;
      border: 2px dashed #E5E5E5;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      font-size: 56px;
    }
    
    .share-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px 16px;
      background: #F5F5F5;
      border-radius: 12px;
      margin-bottom: 12px;
      border: 1px solid #E5E5E5;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .share-btn:hover {
      background: #FFF7ED;
      border-color: #F97316;
    }
    
    .share-btn-text {
      margin-left: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #F97316;
    }
    
    .archive-btn {
      padding: 8px 14px;
      background: rgba(255,255,255,0.2);
      color: white;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.25);
      transition: all 0.2s;
    }
    
    .archive-btn:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .plan-price {
      font-size: 22px;
      font-weight: 700;
      color: #F97316;
      margin-top: 4px;
    }
    
    .checkmark {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      margin-left: 8px;
    }
    
    .calc-btn {
      padding: 10px 16px;
      border-radius: 10px;
      border: 1px solid #E5E5E5;
      background: white;
      font-size: 14px;
      font-weight: 600;
      color: #666;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .calc-btn:hover {
      border-color: #F97316;
      color: #F97316;
    }
    
    .calc-btn.active {
      background: #F97316;
      border-color: #F97316;
      color: white;
    }
    
    .custom-marker {
      background: transparent !important;
      border: none !important;
    }
    
    .custom-marker div {
      pointer-events: auto !important;
    }
    
    .leaflet-container {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    }
    
    .leaflet-popup-content-wrapper {
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .leaflet-marker-icon {
      cursor: pointer !important;
    }
    
    .leaflet-interactive {
      cursor: pointer !important;
    }
    
    .country-tooltip {
      background: white !important;
      border: 1px solid #E5E5E5 !important;
      border-radius: 8px !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15) !important;
      font-size: 12px !important;
    }
    
    .country-tooltip::before {
      border-top-color: white !important;
    }
    
    .package-card {
      min-width: 200px;
      background: white;
      border-radius: 14px;
      padding: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border: 1px solid #E5E5E5;
      cursor: pointer;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }
    
    #regionPackages::-webkit-scrollbar {
      display: none;
    }
    
    #regionPackages {
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    .package-card:hover {
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.2);
      border-color: #F97316;
      transform: translateY(-2px);
    }
    
    .package-card.selected {
      border: 2px solid #F97316;
      background: linear-gradient(135deg, #FFF7ED 0%, #FFF4E6 100%);
    }
    
    .package-region {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .package-name {
      font-size: 16px;
      font-weight: 700;
      color: #1A1A1A;
      margin-bottom: 4px;
    }
    
    .package-details {
      font-size: 13px;
      color: #666;
      margin-bottom: 12px;
    }
    
    .package-price {
      font-size: 20px;
      font-weight: 700;
      color: #F97316;
    }
    
    .package-price-label {
      font-size: 11px;
      color: #999;
      font-weight: 400;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div class="screen active" id="homeScreen">
      <div class="header">
        <div class="header-top">
          <div style="flex: 1;">
            <h1>eSIM –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π</h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –∏ –ø–æ–ª—É—á–∏—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∑–∞ –º–∏–Ω—É—Ç—ã</p>
          </div>
          <div class="map-btn" onclick="showScreen('mapScreen')" title="–ö–∞—Ä—Ç–∞ —Å—Ç—Ä–∞–Ω">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <path d="M9 20L3 17V4L9 7L15 4L21 7V20L15 17L9 20Z" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 7V20M15 4V17" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div class="card compatibility-card">
            <div style="display: flex; align-items: center;">
              <div style="width: 40px; height: 40px; border-radius: 20px; background: #10B981; display: flex; align-items: center; justify-content: center; margin-right: 12px; flex-shrink: 0;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                  <path d="M20 6L9 17L4 12" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div>
                <div style="font-weight: 600; margin-bottom: 2px; font-size: 15px;">–í–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç eSIM</div>
                <div style="font-size: 13px; color: #666;">–ë—Ä–∞—É–∑–µ—Ä (–¥–µ–º–æ-–≤–µ—Ä—Å–∏—è)</div>
              </div>
            </div>
          </div>
          
          <!-- –ë–∞–Ω–Ω–µ—Ä —Å –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏ -->
          <div class="card" style="background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); padding: 16px; margin-bottom: 16px; border: none;">
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div style="flex: 1;">
                <div style="font-size: 16px; font-weight: 700; color: white; margin-bottom: 4px;">üéÅ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</div>
                <div style="font-size: 13px; color: rgba(255,255,255,0.9);">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ <span style="font-weight: 700; background: rgba(255,255,255,0.2); padding: 2px 6px; border-radius: 4px;">WELCOME10</span> –∏ –ø–æ–ª—É—á–∏—Ç–µ —Å–∫–∏–¥–∫—É 10%</div>
              </div>
              <button onclick="alert('–ü—Ä–æ–º–æ–∫–æ–¥ WELCOME10 –ø—Ä–∏–º–µ–Ω–µ–Ω!')" style="
                background: white;
                color: #F97316;
                border: none;
                padding: 8px 14px;
                border-radius: 8px;
                font-weight: 600;
                font-size: 13px;
                cursor: pointer;
                white-space: nowrap;
                margin-left: 12px;
              ">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
          </div>
          
          <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª —Å –ø–∞–∫–µ—Ç–∞–º–∏ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤ -->
          <div style="margin-bottom: 20px;">
            <div class="section-title" style="margin-bottom: 12px;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã</div>
            <div style="display: flex; gap: 12px; overflow-x: auto; overflow-y: hidden; padding-bottom: 8px; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none;" id="regionPackages">
              <!-- –ü–∞–∫–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
          </div>
          
          <div class="search-wrapper">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input type="text" class="search" placeholder="–ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω—ã..." id="searchInput" autocomplete="off">
            <div id="searchSuggestions" class="search-suggestions"></div>
          </div>
          
          <div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</div>
          
          <div id="countriesList"></div>
          
          <button class="btn" id="selectBtn" onclick="showAllCountries()">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω—ã</button>
          
          <div class="info-section">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å?</div>
            <div class="info-item">
              <svg class="info-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è</span>
            </div>
            <div class="info-item">
              <svg class="info-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M2 12H22M12 2C14.5013 4.73835 15.9228 8.29203 16 12C15.9228 15.708 14.5013 19.2616 12 22C9.49872 19.2616 8.07725 15.708 8 12C8.07725 8.29203 9.49872 4.73835 12 2Z"/>
              </svg>
              <span>200+ —Å—Ç—Ä–∞–Ω –∏ —Ä–µ–≥–∏–æ–Ω–æ–≤</span>
            </div>
            <div class="info-item">
              <svg class="info-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                <line x1="12" y1="1" x2="12" y2="23"/>
                <path d="M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6"/>
              </svg>
              <span>–õ—É—á—à–∏–µ —Ü–µ–Ω—ã –Ω–∞ —Ä—ã–Ω–∫–µ</span>
            </div>
            <div class="info-item">
              <svg class="info-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                <rect x="5" y="2" width="14" height="20" rx="2" ry="2"/>
                <line x1="12" y1="18" x2="12.01" y2="18"/>
              </svg>
              <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∫–∞—Ä—Ç—ã -->
    <div class="screen" id="mapScreen" style="background: #FAFAFA;">
      <div class="header" style="background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); border-bottom: 1px solid #E5E7EB;">
        <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="showScreen('homeScreen')" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <div>
              <h1 style="color: white; font-size: 28px; font-weight: 700;">–ö–∞—Ä—Ç–∞ —Å—Ç—Ä–∞–Ω</h1>
              <p style="color: rgba(255,255,255,0.95); font-size: 14px; margin-top: 2px;">–°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</p>
            </div>
          </div>
          <div style="display: flex; align-items: center; gap: 12px;">
            <div style="
              width: 40px;
              height: 40px;
              border-radius: 20px;
              background: rgba(255,255,255,0.1);
              display: flex;
              align-items: center;
              justify-content: center;
              cursor: pointer;
            ">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div style="
              width: 40px;
              height: 40px;
              border-radius: 20px;
              background: rgba(255,255,255,0.1);
              display: flex;
              align-items: center;
              justify-content: center;
              cursor: pointer;
            " onclick="showScreen('profileScreen')">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <circle cx="12" cy="8" r="4"/>
                <path d="M6 21C6 17.6863 8.68629 15 12 15C15.3137 15 18 17.6863 18 21" stroke-linecap="round"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
      
      <div class="content-wrapper" style="background: #FAFAFA;">
        <div id="routeBanner" style="display: none;" class="route-banner">
          <span id="routeText">–ú–∞—Ä—à—Ä—É—Ç: 0 —Å—Ç—Ä–∞–Ω</span>
          <button onclick="clearRoute()" style="background: rgba(255,255,255,0.3); border: 1px solid rgba(255,255,255,0.4); color: white; padding: 6px 12px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 13px;">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
        
        <div class="content" style="background: #FAFAFA;">
          <!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ -->
          <div class="card" style="padding: 0; margin-bottom: 16px; cursor: pointer; overflow: hidden;" onclick="openFullMap()">
            <div style="position: relative; width: 100%; height: 200px; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-radius: 16px 16px 0 0;">
              <svg id="miniMap" width="100%" height="200" viewBox="0 0 400 200" style="display: block;">
                <!-- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –º–∏—Ä–∞ -->
                <path d="M50,80 Q60,60 80,70 T120,75 T160,80 T200,85 T240,80 T280,75 T320,70 T350,75" fill="none" stroke="#4CAF50" stroke-width="1.5" opacity="0.3"/>
                <path d="M50,120 Q60,140 80,130 T120,125 T160,120 T200,115 T240,120 T280,125 T320,130 T350,125" fill="none" stroke="#4CAF50" stroke-width="1.5" opacity="0.3"/>
                
                <!-- –õ–∏–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ -->
                <g id="miniMapRoute"></g>
                
                <!-- –¢–æ—á–∫–∏ —Å—Ç—Ä–∞–Ω -->
                <g id="miniMapPoints"></g>
              </svg>
              <div style="position: absolute; bottom: 12px; left: 50%; transform: translateX(-50%); background: rgba(255,255,255,0.95); padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 600; color: #F97316; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 6px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                  <circle cx="12" cy="10" r="3"/>
                </svg>
                –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞—Ä—Ç—ã
              </div>
            </div>
          </div>
          
          <div class="search-wrapper">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input type="text" class="search" placeholder="–ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω—ã..." id="mapSearchInput" autocomplete="off">
            <div id="mapSearchSuggestions" class="search-suggestions"></div>
          </div>
          
          <div class="filters" id="regionFilters"></div>
          
          <div class="section-title" id="mapSectionTitle" style="color: #1A1A1A;">12 —Å—Ç—Ä–∞–Ω</div>
          <div id="mapCountriesList"></div>
          
          <button class="btn" id="createRouteBtn" style="display: none;" onclick="showCalculatorForRoute()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ—ã</button>
        </div>
      </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–æ–π -->
    <div id="fullMapModal" class="modal" style="display: none;" onclick="if(event.target === this) closeFullMap()">
      <div class="modal-content" style="max-width: 100%; height: 100vh; border-radius: 0; padding: 0;" onclick="event.stopPropagation()">
        <div style="background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); padding: 50px 20px 20px; color: white; position: relative;">
          <h2 style="font-size: 22px; font-weight: 700; margin-bottom: 4px;">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ</h2>
          <p style="font-size: 14px; opacity: 0.95;">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –º–∞—Ä—à—Ä—É—Ç</p>
          <button onclick="closeFullMap()" style="position: absolute; top: 50px; right: 20px; width: 40px; height: 40px; border-radius: 20px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
              <path d="M18 6L6 18M6 6L18 18" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
        
        <div style="position: relative; width: 100%; height: calc(100vh - 140px); background: #F5F5F5; overflow: hidden;">
          <div id="fullMap" style="width: 100%; height: 100%;"></div>
          
          <div style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: white; padding: 14px 24px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); display: flex; align-items: center; gap: 16px; min-width: 280px; justify-content: space-between;">
            <div style="display: flex; flex-direction: column; gap: 4px;">
              <div style="font-size: 14px; font-weight: 600; color: #1A1A1A;">
                –í—ã–±—Ä–∞–Ω–æ: <span id="mapSelectedCount" style="color: #F97316; font-size: 16px;">0</span> —Å—Ç—Ä–∞–Ω
              </div>
              <div id="mapSelectedNames" style="font-size: 11px; color: #666; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ
              </div>
            </div>
            <button onclick="confirmMapSelection()" 
                    style="background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; font-size: 13px; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);" 
                    onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(249, 115, 22, 0.4)'" 
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(249, 115, 22, 0.3)'">
              –ü—Ä–∏–º–µ–Ω–∏—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∑–∞–∫–∞–∑–æ–≤ -->
    <div class="screen" id="ordersScreen">
      <div class="header">
        <div class="header-content">
          <div>
            <h1>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h1>
            <p id="ordersCount">1 –∑–∞–∫–∞–∑</p>
          </div>
          <div class="archive-btn" onclick="showScreen('archiveScreen')">–ê—Ä—Ö–∏–≤</div>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div id="ordersList">
            <!-- –ê–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑ -->
            <div class="card" style="margin-bottom: 16px; cursor: pointer;" onclick="showOrderDetails('order-1')">
              <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                <div style="flex: 1;">
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                    <span style="font-size: 18px; font-weight: 700;">üá™üá∫ –ï–≤—Ä–æ–ø–∞</span>
                    <span style="padding: 2px 8px; background: #10B981; color: white; border-radius: 12px; font-size: 11px; font-weight: 600;">–ê–∫—Ç–∏–≤–µ–Ω</span>
                  </div>
                  <div style="font-size: 13px; color: #666; margin-bottom: 8px;">5 GB ‚Ä¢ 30 –¥–Ω–µ–π</div>
                  <div style="font-size: 12px; color: #999;">–û—Å—Ç–∞–ª–æ—Å—å: 3.2 GB ‚Ä¢ 18 –¥–Ω–µ–π</div>
                </div>
                <div style="text-align: right;">
                  <div style="font-size: 20px; font-weight: 700; color: #F97316;">‚Ç¨24.99</div>
                  <div style="font-size: 11px; color: #999; margin-top: 2px;">15.01.2024</div>
                </div>
              </div>
              <div style="height: 4px; background: #E5E7EB; border-radius: 2px; overflow: hidden; margin-top: 12px;">
                <div style="height: 100%; width: 64%; background: linear-gradient(90deg, #F97316 0%, #FB923C 100%);"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞ -->
    <div class="screen" id="orderDetailsScreen">
      <div class="header">
        <div class="header-content">
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="showScreen('ordersScreen')" style="background: none; border: none; padding: 8px; cursor: pointer; display: flex; align-items: center;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
              </svg>
            </button>
            <div>
              <h1>–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</h1>
            </div>
          </div>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <!-- –°—Ç–∞—Ç—É—Å eSIM -->
          <div class="card" style="margin-bottom: 16px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
              <div>
                <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">–°—Ç–∞—Ç—É—Å eSIM</div>
                <div style="font-size: 13px; color: #666;">ID: ESIM-2024-001234</div>
              </div>
              <span style="padding: 6px 12px; background: #10B981; color: white; border-radius: 16px; font-size: 12px; font-weight: 600;">–ê–∫—Ç–∏–≤–µ–Ω</span>
            </div>
            
            <div style="background: #F9FAFB; border-radius: 12px; padding: 16px; margin-bottom: 16px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                <span style="font-size: 13px; color: #666;">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç—Ä–∞—Ñ–∏–∫–∞</span>
                <span style="font-size: 13px; font-weight: 600;">1.8 GB / 5 GB</span>
              </div>
              <div style="height: 8px; background: #E5E7EB; border-radius: 4px; overflow: hidden;">
                <div style="height: 100%; width: 36%; background: linear-gradient(90deg, #F97316 0%, #FB923C 100%);"></div>
              </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <div style="background: #F9FAFB; border-radius: 12px; padding: 12px;">
                <div style="font-size: 11px; color: #666; margin-bottom: 4px;">–û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π</div>
                <div style="font-size: 20px; font-weight: 700; color: #F97316;">18</div>
              </div>
              <div style="background: #F9FAFB; border-radius: 12px; padding: 12px;">
                <div style="font-size: 11px; color: #666; margin-bottom: 4px;">–û—Å—Ç–∞–ª–æ—Å—å —Ç—Ä–∞—Ñ–∏–∫–∞</div>
                <div style="font-size: 20px; font-weight: 700; color: #F97316;">3.2 GB</div>
              </div>
            </div>
          </div>

          <!-- –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
          <div class="card" style="margin-bottom: 16px;">
            <div style="font-size: 16px; font-weight: 700; margin-bottom: 12px;">–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div style="display: flex; gap: 12px;">
                <div style="min-width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="16" x2="12" y2="12"/>
                    <line x1="12" y1="8" x2="12.01" y2="8"/>
                  </svg>
                </div>
                <div style="flex: 1;">
                  <div style="font-size: 14px; font-weight: 600; margin-bottom: 2px;">–ê–∫—Ç–∏–≤–∞—Ü–∏—è</div>
                  <div style="font-size: 13px; color: #666;">–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ eSIM –ø–æ—Å–ª–µ –ø—Ä–∏–±—ã—Ç–∏—è –≤ —Å—Ç—Ä–∞–Ω—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</div>
                </div>
              </div>
              <div style="display: flex; gap: 12px;">
                <div style="min-width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                    <circle cx="12" cy="10" r="3"/>
                  </svg>
                </div>
                <div style="flex: 1;">
                  <div style="font-size: 14px; font-weight: 600; margin-bottom: 2px;">–°—Ç—Ä–∞–Ω—ã –ø–æ–∫—Ä—ã—Ç–∏—è</div>
                  <div style="font-size: 13px; color: #666;">–ê–≤—Å—Ç—Ä–∏—è, –ë–µ–ª—å–≥–∏—è, –ì–µ—Ä–º–∞–Ω–∏—è, –§—Ä–∞–Ω—Ü–∏—è, –ò—Ç–∞–ª–∏—è, –ò—Å–ø–∞–Ω–∏—è –∏ –µ—â–µ 25 —Å—Ç—Ä–∞–Ω</div>
                </div>
              </div>
              <div style="display: flex; gap: 12px;">
                <div style="min-width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                    <rect x="2" y="6" width="20" height="12" rx="2"/>
                    <path d="M22 10H2"/>
                  </svg>
                </div>
                <div style="flex: 1;">
                  <div style="font-size: 14px; font-weight: 600; margin-bottom: 2px;">–°–∫–æ—Ä–æ—Å—Ç—å</div>
                  <div style="font-size: 13px; color: #666;">4G/LTE –¥–æ 150 –ú–±–∏—Ç/—Å, –ø–æ—Å–ª–µ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –ª–∏–º–∏—Ç–∞ - 64 –ö–±–∏—Ç/—Å</div>
                </div>
              </div>
              <div style="display: flex; gap: 12px;">
                <div style="min-width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10 9 9 9 8 9"/>
                  </svg>
                </div>
                <div style="flex: 1;">
                  <div style="font-size: 14px; font-weight: 600; margin-bottom: 2px;">–£—Å—Ç–∞–Ω–æ–≤–∫–∞</div>
                  <div style="font-size: 13px; color: #666;">QR-–∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ email. –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ –µ–≥–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div>
                </div>
              </div>
            </div>
          </div>

          <!-- –î–æ–∫—É–ø–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ -->
          <div class="card" style="margin-bottom: 16px;">
            <div style="font-size: 16px; font-weight: 700; margin-bottom: 12px;">–î–æ–∫—É–ø–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫</div>
            <div style="font-size: 13px; color: #666; margin-bottom: 16px;">–ü—Ä–æ–¥–ª–∏—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫</div>
            
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div class="plan-card" onclick="selectTopUp('data')" style="cursor: pointer; border: 2px solid #E5E7EB; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">+2 GB</div>
                    <div style="font-size: 13px; color: #666;">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫</div>
                  </div>
                  <div style="font-size: 18px; font-weight: 700; color: #F97316;">‚Ç¨9.99</div>
                </div>
              </div>
              
              <div class="plan-card" onclick="selectTopUp('days')" style="cursor: pointer; border: 2px solid #E5E7EB; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">+7 –¥–Ω–µ–π</div>
                    <div style="font-size: 13px; color: #666;">–ü—Ä–æ–¥–ª–∏—Ç—å —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</div>
                  </div>
                  <div style="font-size: 18px; font-weight: 700; color: #F97316;">‚Ç¨4.99</div>
                </div>
              </div>
              
              <div class="plan-card" onclick="selectTopUp('combo')" style="cursor: pointer; border: 2px solid #E5E7EB; transition: all 0.2s;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">+2 GB + 7 –¥–Ω–µ–π</div>
                    <div style="font-size: 13px; color: #666;">–¢—Ä–∞—Ñ–∏–∫ –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ</div>
                  </div>
                  <div style="font-size: 18px; font-weight: 700; color: #F97316;">‚Ç¨12.99</div>
                </div>
              </div>
            </div>
          </div>

          <!-- QR –∫–æ–¥ –∏ –¥–µ–π—Å—Ç–≤–∏—è -->
          <div class="card">
            <div style="font-size: 16px; font-weight: 700; margin-bottom: 12px;">QR-–∫–æ–¥ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏</div>
            <div style="text-align: center; padding: 20px; background: #F9FAFB; border-radius: 12px; margin-bottom: 16px;">
              <div style="width: 200px; height: 200px; margin: 0 auto; background: white; border: 2px solid #E5E7EB; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                <div style="font-size: 12px; color: #999;">QR-–∫–æ–¥</div>
              </div>
            </div>
            <div style="display: flex; gap: 12px;">
              <button class="btn" style="flex: 1;" onclick="shareOrder()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
                  <circle cx="18" cy="5" r="3"/>
                  <circle cx="6" cy="12" r="3"/>
                  <circle cx="18" cy="19" r="3"/>
                  <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                  <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                </svg>
                –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
              </button>
              <button class="btn-secondary" style="flex: 1;" onclick="downloadQR()">–°–∫–∞—á–∞—Ç—å QR</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="screen" id="profileScreen">
      <div class="header">
        <div class="header-top">
          <div>
            <h1>–ü—Ä–æ—Ñ–∏–ª—å</h1>
            <p id="profileEmail">user@example.com</p>
          </div>
          <button class="burger-btn" onclick="toggleBurgerMenu()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <path d="M3 12H21M3 6H21M3 18H21" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div class="card" style="text-align: center; padding: 24px;">
            <div style="width: 80px; height: 80px; border-radius: 40px; background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); margin: 0 auto 16px; display: flex; align-items: center; justify-content: center;">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <circle cx="12" cy="8" r="4"/>
                <path d="M6 21C6 17.6863 8.68629 15 12 15C15.3137 15 18 17.6863 18 21" stroke-linecap="round"/>
              </svg>
            </div>
            <div style="font-size: 20px; font-weight: 700; margin-bottom: 4px;">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div>
            <div style="font-size: 14px; color: #666;">user@example.com</div>
          </div>
          
          <!-- –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞ -->
          <div class="card" style="background: linear-gradient(135deg, #FFF7ED 0%, #FFF4E6 100%); border: 2px solid #F97316; margin-bottom: 16px;">
            <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
              <div style="width: 56px; height: 56px; border-radius: 28px; background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px; color: #1A1A1A;">–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞</div>
                <div style="font-size: 13px; color: #666;">–ü–æ–ª—É—á–∏—Ç–µ ‚Ç¨5 –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞</div>
              </div>
              <div style="text-align: right;">
                <div style="font-size: 24px; font-weight: 700; color: #F97316;">‚Ç¨5</div>
                <div style="font-size: 11px; color: #999;">–∑–∞ –¥—Ä—É–≥–∞</div>
              </div>
            </div>
            <button class="btn" onclick="inviteFriend()" style="margin-top: 0; background: linear-gradient(135deg, #F97316 0%, #FB923C 100%);">
              –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞
            </button>
          </div>
          
          <!-- –ö—É–ø–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∞ -->
          <div class="card" style="margin-bottom: 16px;">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2" style="flex-shrink: 0;">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              <div style="flex: 1;">
                <div style="font-size: 16px; font-weight: 700; margin-bottom: 2px;">–ö—É–ø–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∞</div>
                <div style="font-size: 13px; color: #666;">–û—Ç–ø—Ä–∞–≤—å—Ç–µ eSIM –ø–ª–∞–Ω –¥—Ä—É–≥—É</div>
              </div>
            </div>
            <button class="btn btn-outline" onclick="buyForFriend()" style="margin-top: 0;">
              –í—ã–±—Ä–∞—Ç—å –ø–ª–∞–Ω –¥–ª—è –¥—Ä—É–≥–∞
            </button>
          </div>
          
          <!-- –°–µ–º–µ–π–Ω—ã–π –ø–∞–∫–µ—Ç -->
          <div class="card" style="background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%); border: 2px solid #10B981; margin-bottom: 16px;">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
              <div style="width: 48px; height: 48px; border-radius: 24px; background: linear-gradient(135deg, #10B981 0%, #059669 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="9" cy="7" r="4"/>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px; color: #1A1A1A;">–°–µ–º–µ–π–Ω—ã–π –ø–∞–∫–µ—Ç</div>
                <div style="font-size: 13px; color: #666; margin-bottom: 8px;">–°–æ–≤–º–µ—Å—Ç–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ –¥–ª—è –≤—Å–µ–π —Å–µ–º—å–∏</div>
                <div style="display: flex; gap: 16px; font-size: 12px; color: #666;">
                  <div>‚úì –î–æ 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                  <div>‚úì –≠–∫–æ–Ω–æ–º–∏—è –¥–æ 30%</div>
                </div>
              </div>
            </div>
            <button class="btn" onclick="showFamilyPlan()" style="margin-top: 12px; background: linear-gradient(135deg, #10B981 0%, #059669 100%); box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);">
              –í—ã–±—Ä–∞—Ç—å —Å–µ–º–µ–π–Ω—ã–π –ø–∞–∫–µ—Ç
            </button>
          </div>

          <!-- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ -->
          <div class="card" style="border: 1px solid #E5E7EB;">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
              <div style="width: 40px; height: 40px; border-radius: 20px; background: #F97316; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M12 5C9.243 5 7 7.243 7 10v1H5a2 2 0 0 0-2 2v2c0 1.103.897 2 2 2h2v1c0 2.757 2.243 5 5 5s5-2.243 5-5v-1h2a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-2v-1c0-2.757-2.243-5-5-5Z"/>
                  <path d="M14 10.5a2 2 0 1 0-2.5 1.937v1.063a1 1 0 0 0 2 0v-1.063A1.996 1.996 0 0 0 14 10.5Z"/>
                  <circle cx="12" cy="18" r="1"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 16px; font-weight: 700; margin-bottom: 2px;">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
                <div style="font-size: 13px; color: #666;">–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å</div>
              </div>
            </div>
            <button class="btn btn-outline" onclick="contactSupport()" style="margin-top: 0;">–ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</button>
          </div>
          
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            <div style="display: flex; justify-content: space-around; padding: 16px 0;">
              <div style="text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #F97316; margin-bottom: 4px;">0</div>
                <div style="font-size: 12px; color: #666;">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</div>
              </div>
              <div style="text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #F97316; margin-bottom: 4px;">0</div>
                <div style="font-size: 12px; color: #666;">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
              </div>
              <div style="text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #F97316; margin-bottom: 4px;">$0</div>
                <div style="font-size: 12px; color: #666;">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            <div style="display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #E5E5E5; cursor: pointer;" onclick="showScreen('travelServicesScreen')">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" style="margin-right: 12px; flex-shrink: 0;">
                <path d="M10 3L8 5L11 8L9 10L6 7L4 9L9 14L7 16L3 20L5 21L9 17L11 19L16 23L18 21L14 17L16 15L21 20L23 18L19 14L21 12L18 9L21 6L19 4L16 7L14 5L17 2L15 1L11 5L9 3L10 2L8 1L6 3L8 5Z"/>
              </svg>
              <span style="flex: 1; font-size: 15px;">–°–µ—Ä–≤–∏—Å—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π (–∞–≤–∏–∞/–ñ–î)</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div style="display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #E5E5E5; cursor: pointer;" onclick="showScreen('ownOperatorScreen')">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" style="margin-right: 12px; flex-shrink: 0;">
                <rect x="3" y="4" width="18" height="16" rx="2"/>
                <path d="M7 8H17" stroke-linecap="round"/>
                <path d="M7 12H14" stroke-linecap="round"/>
                <path d="M7 16H11" stroke-linecap="round"/>
              </svg>
              <span style="flex: 1; font-size: 15px;">–ú–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –∏ –ø–∞–∫–µ—Ç</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div style="display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #E5E5E5; cursor: pointer;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" style="margin-right: 12px; flex-shrink: 0;">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span style="flex: 1; font-size: 15px;">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div style="display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #E5E5E5; cursor: pointer;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" style="margin-right: 12px; flex-shrink: 0;">
                <rect x="1" y="4" width="22" height="16" rx="2"/>
                <path d="M1 10H23"/>
              </svg>
              <span style="flex: 1; font-size: 15px;">–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div style="display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid #E5E5E5; cursor: pointer;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" style="margin-right: 12px; flex-shrink: 0;">
                <circle cx="12" cy="12" r="10"/>
                <path d="M2 12H22M12 2C14.5013 4.73835 15.9228 8.29203 16 12C15.9228 15.708 14.5013 19.2616 12 22C9.49872 19.2616 8.07725 15.708 8 12C8.07725 8.29203 9.49872 4.73835 12 2Z"/>
              </svg>
              <span style="flex: 1; font-size: 15px;">–Ø–∑—ã–∫</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div style="display: flex; align-items: center; padding: 12px 0; cursor: pointer;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2" style="margin-right: 12px; flex-shrink: 0;">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.29152 14.92 10C14.92 12 11.92 13 11.92 13M12 17H12.01" stroke-linecap="round"/>
              </svg>
              <span style="flex: 1; font-size: 15px;">–ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          
          <button class="btn btn-outline" onclick="alert('–í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞')">–í—ã–π—Ç–∏</button>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ -->
    <div class="screen" id="calculatorScreen">
      <div class="header">
        <div>
          <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–∞—Ä–∏—Ñ–æ–≤</h1>
          <p id="calculatorSubtitle">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤</p>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div id="calculatorPlans"></div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∞—Ä—Ö–∏–≤–∞ -->
    <div class="screen" id="archiveScreen">
      <div class="header">
        <div>
          <h1>–ê—Ä—Ö–∏–≤ –∑–∞–∫–∞–∑–æ–≤</h1>
          <p>0 –∑–∞–∫–∞–∑–æ–≤</p>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="filters" style="padding: 16px 16px 0;">
          <div class="filter-chip active" onclick="setArchiveFilter('all', this)">–í—Å–µ</div>
          <div class="filter-chip" onclick="setArchiveFilter('expired', this)">–ò—Å—Ç–µ–∫—à–∏–µ</div>
          <div class="filter-chip" onclick="setArchiveFilter('cancelled', this)">–û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ</div>
        </div>
        
        <div class="content">
          <div style="text-align: center; padding: 40px;">
            <div style="width: 80px; height: 80px; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; background: #F5F5F5; border-radius: 40px;">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="1.5">
                <rect x="3" y="4" width="18" height="4" rx="1"/>
                <path d="M4 8V20C4 20.5523 4.44772 21 5 21H19C19.5523 21 20 20.5523 20 20V8" stroke-linecap="round"/>
                <path d="M10 12H14" stroke-linecap="round"/>
              </svg>
            </div>
            <div style="font-size: 20px; font-weight: 700; margin-bottom: 6px;">–ê—Ä—Ö–∏–≤ –ø—É—Å—Ç</div>
            <div style="color: #666; font-size: 14px;">–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∏ –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã</div>
          </div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ç–∞—Ä–∏—Ñ–æ–≤ -->
    <div class="screen" id="plansScreen">
      <div class="header">
        <div class="header-content">
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="showScreen('homeScreen')" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <div style="flex: 1;">
              <h1 style="font-size: 20px; margin-bottom: 4px;">–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã</h1>
              <p id="plansCountryName" style="font-size: 18px; font-weight: 600; opacity: 1;"></p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div style="display: flex; gap: 8px; margin-bottom: 16px;">
            <button class="filter-chip active" id="plansTabBtn" onclick="if(window.showPlansTab) window.showPlansTab(); return false;" style="flex: 1; text-align: center; padding: 10px; cursor: pointer;">–¢–∞—Ä–∏—Ñ—ã</button>
            <button class="filter-chip" id="calculatorTabBtn" onclick="if(window.showCalculatorTab) window.showCalculatorTab(); return false;" style="flex: 1; text-align: center; padding: 10px; cursor: pointer;">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</button>
          </div>
          
          <div id="plansTab">
            <div id="plansList"></div>
          </div>
          
          <div id="calculatorTab" style="display: none;">
            <div class="card">
              <div class="section-title" style="font-size: 16px; margin-bottom: 16px;">–ü–æ–¥–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ</div>
              
              <div style="margin-bottom: 16px;">
                <label style="display: block; color: #666; font-size: 13px; margin-bottom: 8px;">–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö</label>
                <select id="calcData" style="width: 100%; padding: 12px; border: 1px solid #E5E5E5; border-radius: 12px; font-size: 15px; background: white;">
                  <option value="3">3GB</option>
                  <option value="5" selected>5GB</option>
                  <option value="10">10GB</option>
                  <option value="20">20GB</option>
                  <option value="50">50GB</option>
                  <option value="unlimited">–ë–µ–∑–ª–∏–º–∏—Ç</option>
                </select>
              </div>
              
              <div style="margin-bottom: 16px;">
                <label style="display: block; color: #666; font-size: 13px; margin-bottom: 8px;">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–¥–Ω–µ–π)</label>
                <select id="calcValidity" style="width: 100%; padding: 12px; border: 1px solid #E5E5E5; border-radius: 12px; font-size: 15px; background: white;">
                  <option value="7">7 –¥–Ω–µ–π</option>
                  <option value="14" selected>14 –¥–Ω–µ–π</option>
                  <option value="30">30 –¥–Ω–µ–π</option>
                  <option value="60">60 –¥–Ω–µ–π</option>
                  <option value="90">90 –¥–Ω–µ–π</option>
                </select>
              </div>
              
              <button class="btn" onclick="calculatePlans()" style="margin-top: 8px;">–ù–∞–π—Ç–∏ —Ç–∞—Ä–∏—Ñ—ã</button>
              <button class="btn btn-outline" onclick="showMyTariff()" style="margin-top: 12px;">–ú–æ–π —Ç–∞—Ä–∏—Ñ</button>
              <div id="myTariffBlock" class="card" style="display: none; margin-top: 12px; border: 1px solid #E5E5E5;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">–í–∞—à —Ç–∞—Ä–∏—Ñ</div>
                    <div id="myTariffName" style="font-size: 13px; color: #666;">‚Äî</div>
                  </div>
                  <div id="myTariffPrice" style="font-size: 20px; font-weight: 700; color: #F97316;">‚Äî</div>
                </div>
              </div>
            </div>
            
            <div id="calculatedPlans" style="margin-top: 16px;"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω –¥–ª—è –º—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞ -->
    <div class="screen" id="multiCountryScreen">
      <div class="header">
        <div>
          <h1>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—ã</h1>
          <p>–î–æ 5 —Å—Ç—Ä–∞–Ω –¥–ª—è –º—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞</p>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div id="selectedCountriesBanner" style="display: none; background: #F97316; color: white; padding: 14px 16px; border-radius: 12px; margin-bottom: 16px; font-weight: 600;">
            –í—ã–±—Ä–∞–Ω–æ: <span id="selectedCount">0</span> –∏–∑ 5
          </div>
          
          <div class="search-wrapper">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input type="text" class="search" placeholder="–ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω—ã..." id="multiSearchInput" autocomplete="off">
            <div id="multiSearchSuggestions" class="search-suggestions"></div>
          </div>
          
          <div class="section-title" id="multiSectionTitle">12 —Å—Ç—Ä–∞–Ω</div>
          <div id="multiCountriesList"></div>
          
          <button class="btn" id="confirmMultiBtn" style="display: none;" onclick="confirmMultiCountries()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
      </div>
    </div>

    <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–∞—Ä–∏—Ñ–æ–≤ -->
    <div class="screen" id="calculatorScreen">
      <div class="header">
        <div>
          <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ç–∞—Ä–∏—Ñ–æ–≤</h1>
          <p id="calculatorSubtitle">–ü–æ–¥–±–µ—Ä–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω</p>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</div>
            
            <div style="margin-bottom: 16px;">
              <div style="color: #666; margin-bottom: 8px; font-size: 13px;">–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö</div>
              <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <button class="calc-btn" id="data3" onclick="selectData(3)">3GB</button>
                <button class="calc-btn" id="data5" onclick="selectData(5)">5GB</button>
                <button class="calc-btn active" id="data10" onclick="selectData(10)">10GB</button>
                <button class="calc-btn" id="data20" onclick="selectData(20)">20GB</button>
                <button class="calc-btn" id="data50" onclick="selectData(50)">50GB</button>
              </div>
            </div>
            
            <div style="margin-bottom: 16px;">
              <div style="color: #666; margin-bottom: 8px; font-size: 13px;">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</div>
              <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                <button class="calc-btn" id="days7" onclick="selectDays(7)">7 –¥–Ω–µ–π</button>
                <button class="calc-btn active" id="days14" onclick="selectDays(14)">14 –¥–Ω–µ–π</button>
                <button class="calc-btn" id="days30" onclick="selectDays(30)">30 –¥–Ω–µ–π</button>
              </div>
            </div>
          </div>
          
          <div class="section-title">–ü–æ–¥—Ö–æ–¥—è—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã</div>
          <div id="calculatedPlans"></div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="screen" id="profileScreen">
      <div class="header">
        <div class="header-top">
          <div>
            <h1>–ü—Ä–æ—Ñ–∏–ª—å</h1>
            <p id="profileEmail">user@example.com</p>
          </div>
          <button class="burger-btn" onclick="toggleBurgerMenu()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <path d="M3 12H21M3 6H21M3 18H21" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            <div style="display: flex; justify-content: space-around; padding: 16px 0;">
              <div style="text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #F97316; margin-bottom: 4px;">0</div>
                <div style="font-size: 12px; color: #666;">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</div>
              </div>
              <div style="text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #F97316; margin-bottom: 4px;">0</div>
                <div style="font-size: 12px; color: #666;">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
              </div>
              <div style="text-align: center;">
                <div style="font-size: 24px; font-weight: 700; color: #F97316; margin-bottom: 4px;">$0</div>
                <div style="font-size: 12px; color: #666;">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–ù–∞–≤–∏–≥–∞—Ü–∏—è</div>
            <div class="payment-method" onclick="showScreen('mapScreen')" style="cursor: pointer;">
              <svg class="payment-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2">
                <path d="M9 20L3 17V4L9 7L15 4L21 7V20L15 17L9 20Z" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 7V20M15 4V17" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="payment-text">–ö–∞—Ä—Ç–∞ —Å—Ç—Ä–∞–Ω</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="payment-method" onclick="showScreen('archiveScreen')" style="cursor: pointer; margin-top: 8px;">
              <svg class="payment-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2">
                <rect x="3" y="4" width="18" height="4" rx="1"/>
                <path d="M4 8V20C4 20.5523 4.44772 21 5 21H19C19.5523 21 20 20.5523 20 20V8" stroke-linecap="round"/>
                <path d="M10 12H14" stroke-linecap="round"/>
              </svg>
              <span class="payment-text">–ê—Ä—Ö–∏–≤ –∑–∞–∫–∞–∑–æ–≤</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            <div class="payment-method" style="cursor: pointer;">
              <svg class="payment-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="payment-text">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="payment-method" style="cursor: pointer; margin-top: 8px;">
              <svg class="payment-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2">
                <rect x="1" y="4" width="22" height="16" rx="2"/>
                <path d="M1 10H23"/>
              </svg>
              <span class="payment-text">–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="payment-method" style="cursor: pointer; margin-top: 8px;">
              <svg class="payment-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M2 12H22M12 2C14.5013 4.73835 15.9228 8.29203 16 12C15.9228 15.708 14.5013 19.2616 12 22C9.49872 19.2616 8.07725 15.708 8 12C8.07725 8.29203 9.49872 4.73835 12 2Z"/>
              </svg>
              <span class="payment-text">–Ø–∑—ã–∫</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="payment-method" style="cursor: pointer; margin-top: 8px;">
              <svg class="payment-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.29152 14.92 10C14.92 12 11.92 13 11.92 13M12 17H12.01" stroke-linecap="round"/>
              </svg>
              <span class="payment-text">–ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2" style="flex-shrink: 0;">
                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #E5E5E5;">
              <span style="color: #666; font-size: 14px;">–í–µ—Ä—Å–∏—è</span>
              <span style="font-weight: 600; font-size: 14px;">1.0.0</span>
            </div>
            <div class="payment-method" style="cursor: pointer; margin-top: 8px; border: none; padding: 0;">
              <span style="color: #666; font-size: 14px;">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</span>
              <span style="color: #999;">‚Üí</span>
            </div>
            <div class="payment-method" style="cursor: pointer; margin-top: 8px; border: none; padding: 0;">
              <span style="color: #666; font-size: 14px;">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</span>
              <span style="color: #999;">‚Üí</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–æ–∫—É–ø–∫–∏ -->
    <div class="screen" id="purchaseScreen">
      <div class="header">
        <div>
          <h1>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–í—ã–±—Ä–∞–Ω–Ω—ã–π –ø–ª–∞–Ω</div>
            <div id="planDetails"></div>
          </div>
          
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã</div>
            <div id="paymentMethods"></div>
          </div>
          
          <button class="btn" id="buyBtn" onclick="showPaymentModal()">–ö—É–ø–∏—Ç—å</button>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã -->
    <div class="modal" id="paymentModal">
      <div class="modal-content">
        <div class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã</div>
        <div id="paymentMethodsModal"></div>
        <button class="btn" id="payBtn" onclick="processPayment()" disabled>–û–ø–ª–∞—Ç–∏—Ç—å</button>
        <button class="btn btn-outline" onclick="closePaymentModal()" style="margin-top: 12px;">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ QR -->
    <div class="modal" id="qrModal">
      <div class="modal-content">
        <div class="modal-title">QR-–∫–æ–¥ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏</div>
        <div class="modal-subtitle">–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
        
        <div class="qr-container">
          <div class="qr-code" style="width: 200px; height: 200px; background: white; border: 2px solid #E5E5E5; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
            <svg width="180" height="180" viewBox="0 0 180 180" fill="none">
              <rect x="10" y="10" width="20" height="20" fill="#1A1A1A"/>
              <rect x="150" y="10" width="20" height="20" fill="#1A1A1A"/>
              <rect x="10" y="150" width="20" height="20" fill="#1A1A1A"/>
              <rect x="30" y="10" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="10" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="10" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="10" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="10" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="10" width="10" height="10" fill="#1A1A1A"/>
              <rect x="140" y="10" width="10" height="10" fill="#1A1A1A"/>
              <rect x="10" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="30" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="150" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="170" y="30" width="10" height="10" fill="#1A1A1A"/>
              <rect x="10" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="30" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="150" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="170" y="50" width="10" height="10" fill="#1A1A1A"/>
              <rect x="10" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="30" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="150" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="170" y="70" width="10" height="10" fill="#1A1A1A"/>
              <rect x="10" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="30" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="150" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="170" y="90" width="10" height="10" fill="#1A1A1A"/>
              <rect x="10" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="30" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="150" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="170" y="110" width="10" height="10" fill="#1A1A1A"/>
              <rect x="10" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="30" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="150" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="170" y="130" width="10" height="10" fill="#1A1A1A"/>
              <rect x="10" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="30" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="150" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="170" y="150" width="10" height="10" fill="#1A1A1A"/>
              <rect x="10" y="170" width="10" height="10" fill="#1A1A1A"/>
              <rect x="30" y="170" width="10" height="10" fill="#1A1A1A"/>
              <rect x="50" y="170" width="10" height="10" fill="#1A1A1A"/>
              <rect x="70" y="170" width="10" height="10" fill="#1A1A1A"/>
              <rect x="90" y="170" width="10" height="10" fill="#1A1A1A"/>
              <rect x="110" y="170" width="10" height="10" fill="#1A1A1A"/>
              <rect x="130" y="170" width="10" height="10" fill="#1A1A1A"/>
              <rect x="150" y="170" width="10" height="10" fill="#1A1A1A"/>
              <rect x="170" y="170" width="10" height="10" fill="#1A1A1A"/>
            </svg>
          </div>
        </div>
        
        <div style="margin-bottom: 20px;">
          <div style="font-size: 13px; color: #666; margin-bottom: 8px; text-align: center;">–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –≤—Ä—É—á–Ω—É—é:</div>
          <div style="font-size: 15px; font-weight: 600; text-align: center; padding: 12px; background: #F5F5F5; border-radius: 10px; font-family: monospace; border: 1px solid #E5E5E5;">890112345678901234</div>
        </div>
        
        <div class="share-btn" onclick="sharePurchase()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2" style="margin-right: 8px;">
            <circle cx="18" cy="5" r="3"/>
            <circle cx="6" cy="12" r="3"/>
            <circle cx="18" cy="19" r="3"/>
            <path d="M8.59 13.51L15.42 17.49M15.41 6.51L8.59 10.49" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="share-btn-text">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –¥—Ä—É–≥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</span>
        </div>
        
        <button class="btn" onclick="completeInstallation()">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞</button>
        <button class="btn btn-outline" onclick="closeQRModal()" style="margin-top: 12px;">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å–µ–º–µ–π–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ -->
    <div class="screen" id="familyPlanScreen">
      <div class="header">
        <div class="header-content">
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="showScreen('profileScreen')" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <div>
              <h1>–°–µ–º–µ–π–Ω—ã–π –ø–∞–∫–µ—Ç</h1>
              <p>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <!-- –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ -->
          <div class="card" style="margin-bottom: 16px;">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ</div>
            <div id="familyPlanOptions">
              <div class="plan-card" id="familyTariffBasic" onclick="selectFamilyTariff('basic')" style="margin-bottom: 12px; cursor: pointer; border: 1px solid #E5E7EB;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">–ë–∞–∑–æ–≤—ã–π</div>
                    <div style="font-size: 13px; color: #666;">15GB ‚Ä¢ 30 –¥–Ω–µ–π ‚Ä¢ –î–æ 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                  </div>
                  <div style="font-size: 20px; font-weight: 700; color: #F97316;">‚Ç¨39.99</div>
                </div>
              </div>
              <div class="plan-card" id="familyTariffStandard" onclick="selectFamilyTariff('standard')" style="margin-bottom: 12px; cursor: pointer; border: 1px solid #E5E7EB;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                      <div style="font-size: 16px; font-weight: 700;">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</div>
                      <span style="background: #F97316; color: white; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 600;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</span>
                    </div>
                    <div style="font-size: 13px; color: #666;">30GB ‚Ä¢ 30 –¥–Ω–µ–π ‚Ä¢ –î–æ 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                  </div>
                  <div style="font-size: 20px; font-weight: 700; color: #F97316;">‚Ç¨59.99</div>
                </div>
              </div>
              <div class="plan-card" id="familyTariffPremium" onclick="selectFamilyTariff('premium')" style="cursor: pointer; border: 1px solid #E5E7EB;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">–ü—Ä–µ–º–∏—É–º</div>
                    <div style="font-size: 13px; color: #666;">50GB ‚Ä¢ 30 –¥–Ω–µ–π ‚Ä¢ –î–æ 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                  </div>
                  <div style="font-size: 20px; font-weight: 700; color: #F97316;">‚Ç¨89.99</div>
                </div>
              </div>
            </div>
          </div>

          <!-- –í—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∞—Ä–∏—Ñ –∏ —Å—á–µ—Ç -->
          <div id="selectedFamilyPlanCard" class="card" style="display: none; margin-bottom: 16px; background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%); border: 2px solid #10B981;">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–í–∞—à –ø–∞–∫–µ—Ç</div>
            <div id="familyPlanDetails"></div>
            
            <div style="background: white; border-radius: 12px; padding: 16px; margin-top: 16px;">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <div style="font-size: 14px; color: #666;">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</div>
                <div id="familyTotalPrice" style="font-size: 24px; font-weight: 700; color: #10B981;"></div>
              </div>
              <div style="height: 1px; background: #E5E7EB; margin: 12px 0;"></div>
              <div id="familySplitDetails" style="font-size: 13px; color: #666;"></div>
            </div>
          </div>

          <!-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ -->
          <div class="card" style="margin-bottom: 16px;">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–£—á–∞—Å—Ç–Ω–∏–∫–∏ (<span id="familyMembersCount">1</span>/<span id="familyMaxMembers">5</span>)</div>
            
            <!-- –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -->
            <div style="display: flex; align-items: center; padding: 12px; background: #F9FAFB; border-radius: 12px; margin-bottom: 12px;">
              <div style="width: 40px; height: 40px; border-radius: 20px; background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <circle cx="12" cy="8" r="4"/>
                  <path d="M6 21C6 17.6863 8.68629 15 12 15C15.3137 15 18 17.6863 18 21" stroke-linecap="round"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <div style="font-weight: 600; font-size: 15px;">–í—ã (–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä)</div>
                <div style="font-size: 12px; color: #666;">user@example.com</div>
                <div id="yourPaymentStatus" style="font-size: 12px; margin-top: 4px;"></div>
              </div>
              <div style="text-align: right;">
                <div id="yourShare" style="font-size: 16px; font-weight: 700; color: #F97316; margin-bottom: 4px;"></div>
                <button id="yourPayBtn" class="btn" onclick="payYourShare()" style="padding: 6px 12px; font-size: 12px; margin: 0; display: none;">
                  –û–ø–ª–∞—Ç–∏—Ç—å
                </button>
              </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö -->
            <div id="familyMembersList"></div>

            <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞ -->
            <button id="addFriendBtn" class="btn btn-outline" onclick="addFamilyMember()" style="margin-top: 12px; width: 100%;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M22 11V9M22 11H20M22 11H24" stroke-linecap="round"/>
              </svg>
              –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞
            </button>
          </div>

          <!-- –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ -->
          <div id="familyPlanFeaturesCard" class="card" style="margin-bottom: 16px; display: none;">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ</div>
            <div id="familyPlanFeatures"></div>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã -->
          <button id="familyPayBtn" class="btn" onclick="proceedFamilyPayment()" style="display: none; margin-top: 16px;">
            –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ
          </button>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω: —Å–µ—Ä–≤–∏—Å—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π (–∞–≤–∏–∞/–ñ–î) -->
    <div class="screen" id="travelServicesScreen">
      <div class="header">
        <div class="header-content">
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="showScreen('profileScreen')" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <div>
              <h1 style="font-size: 20px; margin-bottom: 4px;">–°–µ—Ä–≤–∏—Å—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π</h1>
              <p style="font-size: 14px; opacity: 0.95;">–ê–≤–∏–∞ –∏ –ñ–î –±–∏–ª–µ—Ç—ã + –∞–≤—Ç–æ‚ÄëeSIM</p>
            </div>
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="content">
          <div class="card compatibility-card" style="margin-bottom: 16px;">
            <div style="font-size: 14px;">
              –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã, –≥–¥–µ –≤—ã –ø–æ–∫—É–ø–∞–µ—Ç–µ –∞–≤–∏–∞ –∏ –ñ–î –±–∏–ª–µ—Ç—ã, —á—Ç–æ–±—ã –º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
              –ø—Ä–µ–¥–ª–∞–≥–∞–ª–∏ eSIM –ø–æ–¥ –≤–∞—à–∏ –ø–æ–µ–∑–¥–∫–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–ª–∏ –æ–± –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –≤—ã–ª–µ—Ç–æ–º.
            </div>
          </div>

          <div class="card" style="margin-bottom: 16px;">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã</div>

            <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #E5E5E5;">
              <div style="display: flex; align-items: center; gap: 10px;">
                <div style="width: 32px; height: 32px; border-radius: 16px; background: #EEF2FF; display: flex; align-items: center; justify-content: center; font-size: 16px;">‚úàÔ∏è</div>
                <div>
                  <div style="font-size: 15px; font-weight: 600;">Aviasales / Skyscanner</div>
                  <div style="font-size: 12px; color: #666;">–ú–∞—Ä—à—Ä—É—Ç—ã –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤ ‚Üí –ø–æ–¥–±–æ—Ä eSIM</div>
                </div>
              </div>
              <button onclick="alert('–í –¥–µ–º–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ.\n–í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç OAuth/–ª–æ–≥–∏–Ω –≤ —Å–µ—Ä–≤–∏—Å –∞–≤–∏–∞–±–∏–ª–µ—Ç–æ–≤.')" style="border-radius: 999px; padding: 6px 14px; border: 1px solid #E5E5E5; background: white; font-size: 12px; font-weight: 600; cursor: pointer;">
                –ü–æ–¥–∫–ª—é—á–∏—Ç—å
              </button>
            </div>

            <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #E5E5E5;">
              <div style="display: flex; align-items: center; gap: 10px;">
                <div style="width: 32px; height: 32px; border-radius: 16px; background: #ECFEFF; display: flex; align-items: center; justify-content: center; font-size: 16px;">üöÜ</div>
                <div>
                  <div style="font-size: 15px; font-weight: 600;">–†–ñ–î / –ñ–î —Å–µ—Ä–≤–∏—Å—ã</div>
                  <div style="font-size: 12px; color: #666;">–ü–æ–µ–∑–¥–∫–∏ –ø–æ —Å—Ç—Ä–∞–Ω–µ –∏ –ï–≤—Ä–æ–ø–µ</div>
                </div>
              </div>
              <button onclick="alert('–í –¥–µ–º–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ.\n–í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Å–≤—è–∑–∫–∞ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º –ñ–î‚Äë—Å–µ—Ä–≤–∏—Å–∞.')" style="border-radius: 999px; padding: 6px 14px; border: 1px solid #E5E5E5; background: white; font-size: 12px; font-weight: 600; cursor: pointer;">
                –ü–æ–¥–∫–ª—é—á–∏—Ç—å
              </button>
            </div>

            <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px 0;">
              <div style="display: flex; align-items: center; gap: 10px;">
                <div style="width: 32px; height: 32px; border-radius: 16px; background: #FEF3C7; display: flex; align-items: center; justify-content: center; font-size: 16px;">üåç</div>
                <div>
                  <div style="font-size: 15px; font-weight: 600;">Booking / Airbnb</div>
                  <div style="font-size: 12px; color: #666;">–ü–æ –¥–∞—Ç–∞–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π ‚Üí –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± eSIM</div>
                </div>
              </div>
              <button onclick="alert('–í –¥–µ–º–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ü–µ–ø—Ç.\n–ú—ã –º–æ–∂–µ–º –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å –¥–∞—Ç—ã –ø–æ–µ–∑–¥–æ–∫ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å eSIM –∑–∞—Ä–∞–Ω–µ–µ.')" style="border-radius: 999px; padding: 6px 14px; border: 1px solid #E5E5E5; background: white; font-size: 12px; font-weight: 600; cursor: pointer;">
                –ü–æ–¥–∫–ª—é—á–∏—Ç—å
              </button>
            </div>
          </div>

          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 8px;">–ö–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å</div>
            <ul style="font-size: 13px; color: #666; padding-left: 18px; list-style: disc;">
              <li style="margin-bottom: 4px;">–ú—ã –≤–∏–¥–∏–º –≤–∞—à–∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –ø–æ–µ–∑–¥–∫–∏ (—Å—Ç—Ä–∞–Ω–∞, –¥–∞—Ç—ã, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ).</li>
              <li style="margin-bottom: 4px;">–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º eSIM-–ø–∞–∫–µ—Ç –ø–æ–¥ –∫–∞–∂–¥—É—é –ø–æ–µ–∑–¥–∫—É –∏ —Å—á–∏—Ç–∞–µ–º —Å—É–º–º–∞—Ä–Ω—ã–π —Ä–æ—É–º–∏–Ω–≥.</li>
              <li>–ù–∞–ø–æ–º–∏–Ω–∞–µ–º –æ–± –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ eSIM –∑–∞ 1 –¥–µ–Ω—å –¥–æ –≤—ã–ª–µ—Ç–∞/–ø–æ–µ–∑–¥–∞.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω: –º–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –∏ –ø–∞–∫–µ—Ç -->
    <div class="screen" id="ownOperatorScreen">
      <div class="header">
        <div class="header-content">
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="showScreen('profileScreen')" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <div>
              <h1 style="font-size: 20px; margin-bottom: 4px;">–ú–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä</h1>
              <p style="font-size: 14px; opacity: 0.95;">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å eSIM –∏ —Ä–∞—Å—á–µ—Ç —Ç–∞—Ä–∏—Ñ–∞</p>
            </div>
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="content">
          <div class="card" style="margin-bottom: 16px;">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–í–∞—à —Ç–µ–∫—É—â–∏–π –ø–∞–∫–µ—Ç</div>

            <div style="margin-bottom: 12px;">
              <label style="display: block; font-size: 13px; color: #666; margin-bottom: 6px;">–û–ø–µ—Ä–∞—Ç–æ—Ä</label>
              <input id="ownOperatorName" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, MTS, Beeline, Orange" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #E5E5E5; font-size: 14px;">
            </div>

            <div style="display: flex; gap: 12px; margin-bottom: 12px;">
              <div style="flex: 1;">
                <label style="display: block; font-size: 13px; color: #666; margin-bottom: 6px;">–ê–±–æ–Ω–µ–Ω—Ç—Å–∫–∞—è –ø–ª–∞—Ç–∞ / –º–µ—Å</label>
                <input id="ownOperatorPrice" type="number" placeholder="‚Ç¨" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #E5E5E5; font-size: 14px;">
              </div>
              <div style="flex: 1;">
                <label style="display: block; font-size: 13px; color: #666; margin-bottom: 6px;">–ì–ë –≤ –ø–∞–∫–µ—Ç–µ</label>
                <input id="ownOperatorData" type="number" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 30" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #E5E5E5; font-size: 14px;">
              </div>
            </div>

            <div style="margin-bottom: 12px;">
              <label style="display: block; font-size: 13px; color: #666; margin-bottom: 6px;">–û–±—ã—á–Ω–æ —Ç—Ä–∞—Ç–∏—Ç–µ –∑–∞ –º–µ—Å—è—Ü (–ì–ë)</label>
              <input id="ownOperatorUsage" type="number" placeholder="–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #E5E5E5; font-size: 14px;">
            </div>

            <button class="btn btn-outline" style="margin-top: 8px;" onclick="alert('–í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º—ã –º–æ–∂–µ–º –ø–æ–¥—Ç—è–Ω—É—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ iOS/Android.\n–í –¥–µ–º–æ –ø—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é –≤—ã—à–µ.')">
              –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ iOS / Android
            </button>
          </div>

          <div class="card" style="margin-bottom: 16px;">
            <div class="section-title" style="font-size: 16px; margin-bottom: 12px;">–†–∞—Å—á–µ—Ç —Ç–∞—Ä–∏—Ñ–∞</div>
            <div style="font-size: 13px; color: #666; margin-bottom: 12px;">
              –ú—ã —Å—Ä–∞–≤–Ω–∏–º –≤–∞—à —Ç–µ–∫—É—â–∏–π –ø–∞–∫–µ—Ç —Å eSIM‚Äë—Ç–∞—Ä–∏—Ñ–∞–º–∏ –≤ —Å—Ç—Ä–∞–Ω–∞—Ö, –∫—É–¥–∞ –≤—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤—É–µ—Ç–µ, –∏ –ø–æ–∫–∞–∂–µ–º,
              –≥–¥–µ –≤—ã–≥–æ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π eSIM –≤–º–µ—Å—Ç–æ —Ä–æ—É–º–∏–Ω–≥–∞.
            </div>

            <button class="btn" style="margin-top: 0;" onclick="calculateOwnOperatorTariff()">
              –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–æ–π —Ç–∞—Ä–∏—Ñ
            </button>

            <div id="ownOperatorResult" style="margin-top: 16px; display: none;">
              <div style="font-size: 13px; color: #666; margin-bottom: 6px;">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</div>
              <div id="ownOperatorResultText" style="font-size: 15px; font-weight: 600;"></div>
            </div>
          </div>

          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 8px;">–ß—Ç–æ –º—ã —É—á–∏—Ç—ã–≤–∞–µ–º</div>
            <ul style="font-size: 13px; color: #666; padding-left: 18px; list-style: disc;">
              <li style="margin-bottom: 4px;">–í–∞—à—É –∞–±–æ–Ω–µ–Ω—Ç—Å–∫—É—é –ø–ª–∞—Ç—É –∏ –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ –ì–ë.</li>
              <li style="margin-bottom: 4px;">–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞.</li>
              <li>–°—Ç—Ä–∞–Ω—ã, –∫—É–¥–∞ –≤—ã –ª–µ—Ç–∏—Ç–µ, –∏ —Ü–µ–Ω—ã eSIM –¥–ª—è –Ω–∏—Ö.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω: –ú–æ–∏ —Ä–µ–π—Å—ã –∏ –±–∏–ª–µ—Ç—ã -->
    <div class="screen" id="myTripsScreen">
      <div class="header">
        <div class="header-content">
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="showScreen('profileScreen')" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <div>
              <h1 style="font-size: 20px; margin-bottom: 4px;">–ú–æ–∏ —Ä–µ–π—Å—ã –∏ –±–∏–ª–µ—Ç—ã</h1>
              <p style="font-size: 14px; opacity: 0.95;">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –ø–æ–µ–∑–¥–∫–∏ –∏ eSIM</p>
            </div>
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="content">
          <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ -->
          <div class="card compatibility-card" style="margin-bottom: 16px;">
            <div style="font-size: 14px; color: #666; margin-bottom: 12px;">
              –ö–æ–≥–¥–∞ –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π (Aviasales, –†–ñ–î –∏ –¥—Ä.), –º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∏–¥–∏–º –≤–∞—à–∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –ø–æ–µ–∑–¥–∫–∏ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–µ eSIM‚Äë–ø–∞–∫–µ—Ç—ã.
            </div>
            <div style="display: flex; gap: 8px;">
              <button class="btn" onclick="scanTicket()" style="flex: 1; padding: 10px; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 6px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <rect x="3" y="5" width="18" height="14" rx="2"/>
                  <path d="M7 9H17M7 13H13" stroke-linecap="round"/>
                </svg>
                <span>–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –±–∏–ª–µ—Ç</span>
              </button>
              <button class="btn btn-outline" onclick="alert('–í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ–π—Å–∞ –≤—Ä—É—á–Ω—É—é. –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ –Ω–æ–º–µ—Ä–∞ —Ä–µ–π—Å–∞ –∏–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.')" style="flex: 1; padding: 10px; font-size: 14px;">
                –í–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é
              </button>
            </div>
          </div>
          
          <!-- –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —Ä–µ–π—Å—ã -->
          <div class="section-title" style="font-size: 18px; margin-bottom: 12px;">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –ø–æ–µ–∑–¥–∫–∏</div>
          
          <!-- –î–µ–º–æ-—Ä–µ–π—Å 1: –ê–≤–∏–∞ -->
          <div class="card" style="margin-bottom: 16px; border: 2px solid #F97316;">
            <div style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px;">
              <div style="width: 48px; height: 48px; border-radius: 24px; background: linear-gradient(135deg, #F97316 0%, #FB923C 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                  <div>
                    <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">–ú–æ—Å–∫–≤–∞ ‚Üí –ü–∞—Ä–∏–∂</div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 4px;">SU 245 ‚Ä¢ –ê—ç—Ä–æ—Ñ–ª–æ—Ç</div>
                    <div style="font-size: 12px; color: #999;">15 –º–∞—Ä—Ç–∞ 2024, 14:30</div>
                  </div>
                  <div style="background: #10B981; color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; white-space: nowrap;">
                    –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
                  </div>
                </div>
                <div style="display: flex; gap: 8px; margin-top: 12px;">
                  <div style="flex: 1; background: #F9FAFB; border-radius: 8px; padding: 8px;">
                    <div style="font-size: 11px; color: #666; margin-bottom: 4px;">–í—ã–ª–µ—Ç</div>
                    <div style="font-size: 13px; font-weight: 600;">SVO ‚Üí CDG</div>
                  </div>
                  <div style="flex: 1; background: #F9FAFB; border-radius: 8px; padding: 8px;">
                    <div style="font-size: 11px; color: #666; margin-bottom: 4px;">–ü—Ä–∏–ª–µ—Ç</div>
                    <div style="font-size: 13px; font-weight: 600;">15 –º–∞—Ä—Ç–∞, 18:45</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π eSIM -->
            <div style="background: #FFF7ED; border-radius: 12px; padding: 12px; margin-top: 12px; border: 1px solid #F97316;">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <div>
                  <div style="font-size: 14px; font-weight: 600; color: #F97316; margin-bottom: 2px;">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π eSIM</div>
                  <div style="font-size: 12px; color: #666;">–§—Ä–∞–Ω—Ü–∏—è ‚Ä¢ 10GB ‚Ä¢ 14 –¥–Ω–µ–π</div>
                </div>
                <div style="text-align: right;">
                  <div style="font-size: 18px; font-weight: 700; color: #F97316;">24,99 ‚Ç¨</div>
                </div>
              </div>
              <button class="btn" onclick="selectESIMForTrip('france', 'paris')" style="width: 100%; margin-top: 8px; padding: 10px; font-size: 14px;">
                –í—ã–±—Ä–∞—Ç—å eSIM –¥–ª—è –ø–æ–µ–∑–¥–∫–∏
              </button>
            </div>
          </div>

          <!-- –î–µ–º–æ-—Ä–µ–π—Å 2: –ñ–î -->
          <div class="card" style="margin-bottom: 16px;">
            <div style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px;">
              <div style="width: 48px; height: 48px; border-radius: 24px; background: linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <rect x="2" y="6" width="20" height="12" rx="2"/>
                  <path d="M6 10h12M8 14h8" stroke-linecap="round"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                  <div>
                    <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">–ú–æ—Å–∫–≤–∞ ‚Üí –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</div>
                    <div style="font-size: 13px; color: #666; margin-bottom: 4px;">–ü–æ–µ–∑–¥ ‚Ññ 001 ‚Ä¢ –†–ñ–î</div>
                    <div style="font-size: 12px; color: #999;">20 –º–∞—Ä—Ç–∞ 2024, 22:00</div>
                  </div>
                  <div style="background: #10B981; color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; white-space: nowrap;">
                    –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
                  </div>
                </div>
                <div style="display: flex; gap: 8px; margin-top: 12px;">
                  <div style="flex: 1; background: #F9FAFB; border-radius: 8px; padding: 8px;">
                    <div style="font-size: 11px; color: #666; margin-bottom: 4px;">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
                    <div style="font-size: 13px; font-weight: 600;">–ú–æ—Å–∫–≤–∞</div>
                  </div>
                  <div style="flex: 1; background: #F9FAFB; border-radius: 8px; padding: 8px;">
                    <div style="font-size: 11px; color: #666; margin-bottom: 4px;">–ü—Ä–∏–±—ã—Ç–∏–µ</div>
                    <div style="font-size: 13px; font-weight: 600;">21 –º–∞—Ä—Ç–∞, 06:30</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Ä–µ–π—Å–æ–≤ -->
            <div style="background: #F0F9FF; border-radius: 12px; padding: 12px; margin-top: 12px; border: 1px solid #3B82F6;">
              <div style="font-size: 13px; color: #666;">
                <strong>–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–µ–π—Å:</strong> –î–ª—è –ø–æ–µ–∑–¥–æ–∫ –ø–æ –†–æ—Å—Å–∏–∏ eSIM –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞—Ä–∏—Ñ.
              </div>
            </div>
          </div>

          <!-- –ü—Ä–æ—à–µ–¥—à–∏–µ —Ä–µ–π—Å—ã -->
          <div class="section-title" style="font-size: 18px; margin-bottom: 12px; margin-top: 24px;">–ü—Ä–æ—à–µ–¥—à–∏–µ –ø–æ–µ–∑–¥–∫–∏</div>
          
          <div class="card" style="opacity: 0.6;">
            <div style="display: flex; align-items: flex-start; gap: 12px;">
              <div style="width: 48px; height: 48px; border-radius: 24px; background: #E5E7EB; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
                  <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px;">–ú–æ—Å–∫–≤–∞ ‚Üí –ë–µ—Ä–ª–∏–Ω</div>
                <div style="font-size: 13px; color: #666; margin-bottom: 4px;">LH 1234 ‚Ä¢ Lufthansa</div>
                <div style="font-size: 12px; color: #999;">5 —Ñ–µ–≤—Ä–∞–ª—è 2024</div>
              </div>
              <div style="background: #E5E7EB; color: #666; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600;">
                –ó–∞–≤–µ—Ä—à–µ–Ω
              </div>
            </div>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ -->
          <div class="card" style="margin-top: 24px; background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%); border: 2px solid #10B981;">
            <div style="text-align: center; padding: 8px 0;">
              <div style="font-size: 16px; font-weight: 700; margin-bottom: 4px; color: #1A1A1A;">–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π</div>
              <div style="font-size: 13px; color: #666; margin-bottom: 12px;">–ß—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –≤—Å–µ –≤–∞—à–∏ —Ä–µ–π—Å—ã –∏ –±–∏–ª–µ—Ç—ã</div>
              <button class="btn" onclick="openTravelServices()" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω: –ú–æ–∏ —Ä–µ–π—Å—ã –∏ –±–∏–ª–µ—Ç—ã -->
    <div class="screen" id="myTripsScreen">
      <div class="header">
        <div class="header-content">
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="showScreen('profileScreen')" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 10px; padding: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <div>
              <h1 style="font-size: 20px; margin-bottom: 4px;">–ú–æ–∏ —Ä–µ–π—Å—ã –∏ –±–∏–ª–µ—Ç—ã</h1>
              <p style="font-size: 14px; opacity: 0.95;">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –ø–æ–µ–∑–¥–∫–∏ –∏ eSIM</p>
            </div>
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="content">
          <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ -->
          <div class="card compatibility-card" style="margin-bottom: 16px;">
            <div style="font-size: 14px; color: #666;">
              –ö–æ–≥–¥–∞ –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π (Aviasales, –†–ñ–î –∏ –¥—Ä.), –º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∏–¥–∏–º –≤–∞—à–∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –ø–æ–µ–∑–¥–∫–∏ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–µ eSIM‚Äë–ø–∞–∫–µ—Ç—ã.
            </div>
          </div>

          <!-- –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —Ä–µ–π—Å—ã -->
          <div class="section-title" style="font-size: 18px; margin-bottom: 12px;">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –ø–æ–µ–∑–¥–∫–∏</div>
          
          <!-- –î–µ–º–æ-—Ä–µ–π—Å—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –±–ª–æ–∫–µ –≤—ã—à–µ -->

          <!-- –ö–∞—Ä—Ç–∞ Wi‚ÄëFi —Ç–æ—á–µ–∫ –∏ –Ω–æ–≤–æ—Å—Ç–∏ –±—É–¥—É—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –Ω–æ–≤–æ—Å—Ç–µ–π -->
        </div>
      </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω: –ù–æ–≤–æ—Å—Ç–∏ –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ -->
    <div class="screen" id="newsScreen">
      <div class="header">
        <div class="header-top">
          <div>
            <h1>–ù–æ–≤–æ—Å—Ç–∏</h1>
            <p>–í—Å–µ –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤</p>
          </div>
        </div>
      </div>
      
      <div class="content-wrapper">
        <div class="content">
          <!-- –ë–ª–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π -->
          <div class="card" style="margin-bottom: 16px; padding: 0; overflow: hidden;">
            <div style="padding: 16px 16px 8px;">
              <div class="section-title" style="font-size: 18px; margin-bottom: 4px; padding: 0;">–°–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</div>
              <div style="font-size: 13px; color: #666;">–ü–æ–¥–±–æ—Ä–∫–∞ –≤–∞–∂–Ω–æ–≥–æ –¥–ª—è –ø–æ–µ–∑–¥–æ–∫ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è eSIM.</div>
            </div>
            
            <div style="display: flex; flex-direction: column; gap: 12px; padding: 0 16px 16px;">
              <!-- –ù–æ–≤–æ—Å—Ç—å 1 -->
              <div style="border-radius: 14px; background: #FFF7ED; border: 1px solid #FED7AA; overflow: hidden; display: flex; flex-direction: row; gap: 0;">
                <div style="width: 88px; min-width: 88px; background-image: linear-gradient(135deg, #FDBA74 0%, #F97316 100%); display: flex; align-items: flex-end; justify-content: center; padding: 8px;">
                  <div style="font-size: 28px;">üåç</div>
                </div>
                <div style="padding: 10px 12px; flex: 1;">
                  <div style="font-size: 11px; text-transform: uppercase; color: #EA580C; font-weight: 600; margin-bottom: 4px; letter-spacing: 0.06em;">–†–æ—É–º–∏–Ω–≥</div>
                  <div style="font-size: 15px; font-weight: 600; margin-bottom: 4px;">–ï–≤—Ä–æ–ø–∞ —Å–Ω–∏–∂–∞–µ—Ç —Ü–µ–Ω—ã –Ω–∞ eSIM‚Äë—Ä–æ—É–º–∏–Ω–≥</div>
                  <div style="font-size: 13px; color: #666; margin-bottom: 6px;">–í –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –ï–° –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ eSIM‚Äë–ø–∞–∫–µ—Ç—ã –æ—Ç 5‚Ç¨ –∑–∞ 5GB.</div>
                  <div style="font-size: 12px; color: #999;">–û–±–Ω–æ–≤–ª–µ–Ω–æ: —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
              </div>
              
              <!-- –ù–æ–≤–æ—Å—Ç—å 2 -->
              <div style="border-radius: 14px; background: #EFF6FF; border: 1px solid #BFDBFE; overflow: hidden; display: flex; flex-direction: row; gap: 0;">
                <div style="width: 88px; min-width: 88px; background-image: linear-gradient(135deg, #93C5FD 0%, #1D4ED8 100%); display: flex; align-items: flex-end; justify-content: center; padding: 8px;">
                  <div style="font-size: 28px;">‚úàÔ∏è</div>
                </div>
                <div style="padding: 10px 12px; flex: 1;">
                  <div style="font-size: 11px; text-transform: uppercase; color: #1D4ED8; font-weight: 600; margin-bottom: 4px; letter-spacing: 0.06em;">–ê—ç—Ä–æ–ø–æ—Ä—Ç—ã</div>
                  <div style="font-size: 15px; font-weight: 600; margin-bottom: 4px;">–í –¢–æ–∫–∏–æ –∏ –°–µ—É–ª–µ –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ –∑–æ–Ω—ã —Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º Wi‚ÄëFi</div>
                  <div style="font-size: 13px; color: #666; margin-bottom: 6px;">–¢–µ–ø–µ—Ä—å –ø—Ä–æ—â–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å eSIM —Å—Ä–∞–∑—É –ø–æ –ø—Ä–∏–ª–µ—Ç–µ, –Ω–µ —Ç—Ä–∞—Ç—è –º–æ–±–∏–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫.</div>
                  <div style="font-size: 12px; color: #999;">–û–±–Ω–æ–≤–ª–µ–Ω–æ: –≤—á–µ—Ä–∞</div>
                </div>
              </div>
              
              <!-- –ù–æ–≤–æ—Å—Ç—å 3 -->
              <div style="border-radius: 14px; background: #ECFDF5; border: 1px solid #A7F3D0; overflow: hidden; display: flex; flex-direction: row; gap: 0;">
                <div style="width: 88px; min-width: 88px; background-image: linear-gradient(135deg, #6EE7B7 0%, #047857 100%); display: flex; align-items: flex-end; justify-content: center; padding: 8px;">
                  <div style="font-size: 28px;">üì±</div>
                </div>
                <div style="padding: 10px 12px; flex: 1;">
                  <div style="font-size: 11px; text-transform: uppercase; color: #047857; font-weight: 600; margin-bottom: 4px; letter-spacing: 0.06em;">–°–æ–≤–µ—Ç—ã</div>
                  <div style="font-size: 15px; font-weight: 600; margin-bottom: 4px;">–ö–∞–∫ –Ω–µ —Å–∂–µ—á—å –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –≤ –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –ø–æ–µ–∑–¥–∫–∏</div>
                  <div style="font-size: 13px; color: #666; margin-bottom: 6px;">–ú—ã —Å–æ–±—Ä–∞–ª–∏ —Å–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –ª–∞–π—Ñ—Ö–∞–∫–æ–≤ –¥–ª—è iOS –∏ Android, —á—Ç–æ–±—ã —ç–∫–æ–Ω–æ–º–∏—Ç—å –¥–æ 30% —Ç—Ä–∞—Ñ–∏–∫–∞.</div>
                  <div style="font-size: 12px; color: #999;">–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2 –¥–Ω—è –Ω–∞–∑–∞–¥</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- –ö–∞—Ä—Ç–∞ Wi‚ÄëFi —Ç–æ—á–µ–∫ -->
          <div class="card" style="margin-bottom: 16px;">
            <div class="section-title" style="font-size: 16px; margin-bottom: 8px;">–ö–∞—Ä—Ç–∞ Wi‚ÄëFi —Ç–æ—á–µ–∫</div>
            <div style="font-size: 13px; color: #666; margin-bottom: 8px;">
              –£—Å–ª–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ—á–µ–∫ Wi‚ÄëFi –ø–æ –º–∏—Ä—É: –∞—ç—Ä–æ–ø–æ—Ä—Ç—ã, –≤–æ–∫–∑–∞–ª—ã –∏ –≥–æ—Ä–æ–¥—Å–∫–∏–µ –∑–æ–Ω—ã.
            </div>
            <div id="wifiMap" style="height: 220px; border-radius: 16px; overflow: hidden; margin-top: 4px;"></div>
            <div style="font-size: 11px; color: #999; margin-top: 8px;">
              –î–∞–Ω–Ω—ã–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ. –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥—É—Ç –∂–∏–≤—ã–µ —Ç–æ—á–∫–∏ –∏–∑ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
            </div>
          </div>
          
          <!-- –°–ø–∏—Å–æ–∫ Wi‚ÄëFi —Ç–æ—á–µ–∫ -->
          <div class="card">
            <div class="section-title" style="font-size: 16px; margin-bottom: 8px;">–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ—á–µ–∫</div>
            <div style="display: flex; flex-direction: column; gap: 8px; font-size: 13px; color: #444;">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <div style="font-weight: 600;">–ü–∞—Ä–∏–∂ ‚Äî CDG –∞—ç—Ä–æ–ø–æ—Ä—Ç</div>
                  <div style="font-size: 12px; color: #666;">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π Wi‚ÄëFi –≤ –∑–æ–Ω–∞—Ö –≤—ã–ª–µ—Ç–∞ –∏ –ø—Ä–∏–ª—ë—Ç–∞</div>
                </div>
                <span style="font-size: 11px; color: #16A34A; font-weight: 600;">FREE</span>
              </div>
              
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <div style="font-weight: 600;">–ë–µ—Ä–ª–∏–Ω ‚Äî Hauptbahnhof</div>
                  <div style="font-size: 12px; color: #666;">30 –º–∏–Ω—É—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ Wi‚ÄëFi –¥–ª—è –≤—Å–µ—Ö</div>
                </div>
                <span style="font-size: 11px; color: #16A34A; font-weight: 600;">FREE</span>
              </div>
              
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <div style="font-weight: 600;">–°—Ç–∞–º–±—É–ª ‚Äî –°—Ç–∞—Ä—ã–π –≥–æ—Ä–æ–¥</div>
                  <div style="font-size: 12px; color: #666;">–ö–∞—Ñ–µ –∏ –∫–æ–≤–æ—Ä–∫–∏–Ω–≥–∏ —Å –±—ã—Å—Ç—Ä—ã–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º</div>
                </div>
                <span style="font-size: 11px; color: #F97316; font-weight: 600;">CAFE</span>
              </div>
              
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <div style="font-weight: 600;">–¢–æ–∫–∏–æ ‚Äî Tokyo Station</div>
                  <div style="font-size: 12px; color: #666;">–¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä + –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Wi‚ÄëFi</div>
                </div>
                <span style="font-size: 11px; color: #16A34A; font-weight: 600;">FREE</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="tabs">
      <div class="tab active" onclick="showScreen('homeScreen')">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 12L5 10M5 10L12 3L19 10M5 10V20C5 20.5523 5.44772 21 6 21H9M19 10L21 12M19 10V20C19 20.5523 18.5523 21 18 21H15M9 21C9.55228 21 10 20.5523 10 20V16C10 15.4477 10.4477 15 11 15H13C13.5523 15 14 15.4477 14 16V20C14 20.5523 14.4477 21 15 21H9Z" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div>–ì–ª–∞–≤–Ω–∞—è</div>
      </div>
      <div class="tab" onclick="showScreen('ordersScreen')">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="7" width="20" height="14" rx="2"/>
          <path d="M16 7V5C16 3.89543 15.1046 3 14 3H10C8.89543 3 8 3.89543 8 5V7"/>
          <path d="M8 12H16M8 16H16" stroke-linecap="round"/>
        </svg>
        <div>–ó–∞–∫–∞–∑—ã</div>
      </div>
      <div class="tab" onclick="showScreen('newsScreen')">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="14" rx="2"/>
          <path d="M7 8H17M7 12H13" stroke-linecap="round"/>
        </svg>
        <div>–ù–æ–≤–æ—Å—Ç–∏</div>
      </div>
      <div class="tab" onclick="showScreen('profileScreen')">
        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="8" r="4"/>
          <path d="M6 21C6 17.6863 8.68629 15 12 15C15.3137 15 18 17.6863 18 21" stroke-linecap="round"/>
        </svg>
        <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
      </div>
    </div>
  </div>
  
  <!-- –°–∫—Ä—ã—Ç—ã–π –∏–Ω–ø—É—Ç –¥–ª—è —Å–∫–∞–Ω–∞ –±–∏–ª–µ—Ç–∞ -->
  <input id="ticketUpload" type="file" accept="image/*,.pdf" style="display:none" />
  
  <!-- –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é (–≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è) -->
  <div class="burger-overlay" id="burgerOverlay" onclick="closeBurgerMenu()"></div>
  <div class="burger-menu" id="burgerMenu">
      <div class="burger-header">
        <div>
          <h1 style="font-size: 24px; margin-bottom: 4px;">–ú–µ–Ω—é</h1>
          <p style="font-size: 14px; opacity: 0.95;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏</p>
        </div>
        <button class="burger-close" onclick="closeBurgerMenu()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <path d="M18 6L6 18M6 6L18 18" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      
      <div class="burger-content">
        <div class="burger-menu-section-title">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</div>
        <div class="burger-menu-item" onclick="openMyTrips()">
          <div class="burger-menu-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <path d="M9 11l3 3L22 4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="burger-menu-text">–ú–æ–∏ —Ä–µ–π—Å—ã –∏ –±–∏–ª–µ—Ç—ã</div>
          <svg class="burger-menu-arrow" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="burger-menu-item" onclick="openTravelServices()">
          <div class="burger-menu-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <path d="M10 3L8 5L11 8L9 10L6 7L4 9L9 14L7 16L3 20L5 21L9 17L11 19L16 23L18 21L14 17L16 15L21 20L23 18L19 14L21 12L18 9L21 6L19 4L16 7L14 5L17 2L15 1L11 5L9 3L10 2L8 1L6 3L8 5Z"/>
            </svg>
          </div>
          <div class="burger-menu-text">–°–µ—Ä–≤–∏—Å—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π (–∞–≤–∏–∞/–ñ–î)</div>
          <svg class="burger-menu-arrow" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        
        <div class="burger-menu-section-title">–û–ø–µ—Ä–∞—Ç–æ—Ä –∏ —Ç–∞—Ä–∏—Ñ—ã</div>
        <div class="burger-menu-item" onclick="openOwnOperator()">
          <div class="burger-menu-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <rect x="3" y="4" width="18" height="16" rx="2"/>
              <path d="M7 8H17" stroke-linecap="round"/>
              <path d="M7 12H14" stroke-linecap="round"/>
              <path d="M7 16H11" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="burger-menu-text">–ú–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –∏ –ø–∞–∫–µ—Ç</div>
          <svg class="burger-menu-arrow" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        
        <div class="burger-menu-section-title">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</div>
        <div class="burger-menu-item" onclick="closeBurgerMenu(); inviteFriend();">
          <div class="burger-menu-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="burger-menu-text">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</div>
          <svg class="burger-menu-arrow" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        
        <div class="burger-menu-item" onclick="closeBurgerMenu(); buyForFriend();">
          <div class="burger-menu-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </div>
          <div class="burger-menu-text">–ö—É–ø–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∞</div>
          <svg class="burger-menu-arrow" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        
        <div class="burger-menu-item" onclick="closeBurgerMenu(); showFamilyPlan();">
          <div class="burger-menu-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="burger-menu-text">–°–µ–º–µ–π–Ω—ã–π –ø–∞–∫–µ—Ç</div>
          <svg class="burger-menu-arrow" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        
        <div class="burger-menu-section-title">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
        <div class="burger-menu-item" onclick="closeBurgerMenu(); contactSupport();">
          <div class="burger-menu-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2">
              <path d="M12 5C9.243 5 7 7.243 7 10v1H5a2 2 0 0 0-2 2v2c0 1.103.897 2 2 2h2v1c0 2.757 2.243 5 5 5s5-2.243 5-5v-1h2a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-2v-1c0-2.757-2.243-5-5-5Z"/>
              <path d="M14 10.5a2 2 0 1 0-2.5 1.937v1.063a1 1 0 0 0 2 0v-1.063A1.996 1.996 0 0 0 14 10.5Z"/>
              <circle cx="12" cy="18" r="1"/>
            </svg>
          </div>
          <div class="burger-menu-text">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
          <svg class="burger-menu-arrow" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
    </div>
  
  <script>
    const countries = [
      {id: '1', name: '–°–®–ê', code: 'US', flag: 'üá∫üá∏', region: '–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞', price: {min: 9.99, max: 29.99, currency: 'USD'}, lat: 39.8283, lng: -98.5795},
      {id: '2', name: '–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è', code: 'GB', flag: 'üá¨üáß', region: '–ï–≤—Ä–æ–ø–∞', price: {min: 7.99, max: 24.99, currency: 'GBP'}, lat: 54.7024, lng: -3.2766},
      {id: '3', name: '–ì–µ—Ä–º–∞–Ω–∏—è', code: 'DE', flag: 'üá©üá™', region: '–ï–≤—Ä–æ–ø–∞', price: {min: 8.99, max: 26.99, currency: 'EUR'}, lat: 51.1657, lng: 10.4515},
      {id: '4', name: '–§—Ä–∞–Ω—Ü–∏—è', code: 'FR', flag: 'üá´üá∑', region: '–ï–≤—Ä–æ–ø–∞', price: {min: 8.99, max: 26.99, currency: 'EUR'}, lat: 46.2276, lng: 2.2137},
      {id: '5', name: '–ò—Å–ø–∞–Ω–∏—è', code: 'ES', flag: 'üá™üá∏', region: '–ï–≤—Ä–æ–ø–∞', price: {min: 7.99, max: 24.99, currency: 'EUR'}, lat: 40.4637, lng: -3.7492},
      {id: '6', name: '–ò—Ç–∞–ª–∏—è', code: 'IT', flag: 'üáÆüáπ', region: '–ï–≤—Ä–æ–ø–∞', price: {min: 7.99, max: 24.99, currency: 'EUR'}, lat: 41.8719, lng: 12.5674},
      {id: '7', name: '–Ø–ø–æ–Ω–∏—è', code: 'JP', flag: 'üáØüáµ', region: '–ê–∑–∏—è', price: {min: 10.99, max: 32.99, currency: 'USD'}, lat: 36.2048, lng: 138.2529},
      {id: '8', name: '–Æ–∂–Ω–∞—è –ö–æ—Ä–µ—è', code: 'KR', flag: 'üá∞üá∑', region: '–ê–∑–∏—è', price: {min: 9.99, max: 29.99, currency: 'USD'}, lat: 35.9078, lng: 127.7669},
      {id: '9', name: '–ê–≤—Å—Ç—Ä–∞–ª–∏—è', code: 'AU', flag: 'üá¶üá∫', region: '–û–∫–µ–∞–Ω–∏—è', price: {min: 11.99, max: 34.99, currency: 'AUD'}, lat: -25.2744, lng: 133.7751},
      {id: '10', name: '–ö–∞–Ω–∞–¥–∞', code: 'CA', flag: 'üá®üá¶', region: '–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞', price: {min: 9.99, max: 29.99, currency: 'CAD'}, lat: 56.1304, lng: -106.3468},
      {id: '11', name: '–¢—É—Ä—Ü–∏—è', code: 'TR', flag: 'üáπüá∑', region: '–ï–≤—Ä–æ–ø–∞', price: {min: 6.99, max: 22.99, currency: 'USD'}, lat: 38.9637, lng: 35.2433},
      {id: '12', name: '–û–ê–≠', code: 'AE', flag: 'üá¶üá™', region: '–ë–ª–∏–∂–Ω–∏–π –í–æ—Å—Ç–æ–∫', price: {min: 8.99, max: 26.99, currency: 'USD'}, lat: 23.4241, lng: 53.8478},
      {id: '13', name: '–†–æ—Å—Å–∏—è', code: 'RU', flag: 'üá∑üá∫', region: '–°–ù–ì', price: {min: 5.99, max: 19.99, currency: 'USD'}, lat: 61.5240, lng: 105.3188},
      {id: '14', name: '–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', code: 'KZ', flag: 'üá∞üáø', region: '–°–ù–ì', price: {min: 6.99, max: 21.99, currency: 'USD'}, lat: 48.0196, lng: 66.9237},
      {id: '15', name: '–ë–µ–ª–∞—Ä—É—Å—å', code: 'BY', flag: 'üáßüáæ', region: '–°–ù–ì', price: {min: 6.99, max: 21.99, currency: 'USD'}, lat: 53.7098, lng: 27.9534},
    ];
    
    // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã-–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã, —á—Ç–æ–±—ã —Å–ø–∏—Å–æ–∫ –±—ã–ª >180
    const targetCountriesCount = 185;
    const regions = ['–ï–≤—Ä–æ–ø–∞', '–ê–∑–∏—è', '–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞', '–Æ–∂–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞', '–ê—Ñ—Ä–∏–∫–∞', '–û–∫–µ–∞–Ω–∏—è', '–ë–ª–∏–∂–Ω–∏–π –í–æ—Å—Ç–æ–∫', '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è', '–î—Ä—É–≥–æ–µ'];
    let placeholderIndex = 1;
    while (countries.length < targetCountriesCount) {
      const idx = countries.length + 1;
      const region = regions[placeholderIndex % regions.length];
      const lat = -70 + (placeholderIndex * 4.5) % 140; // —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ —à–∏—Ä–æ—Ç–µ
      const lng = -170 + (placeholderIndex * 8) % 340;  // —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –¥–æ–ª–≥–æ—Ç–µ
      countries.push({
        id: `p${idx}`,
        name: `–°—Ç—Ä–∞–Ω–∞ ${idx}`,
        code: `P${idx}`,
        flag: 'üåê',
        region,
        price: {min: 9.99, max: 29.99, currency: 'USD'},
        lat,
        lng
      });
      placeholderIndex += 1;
    }
    
    let map = null;
    let mapMarkers = [];
    let mapRouteLayer = null;
    
    // –ö–∞—Ä—Ç–∞ —Ç–æ—á–µ–∫ Wi‚ÄëFi –¥–ª—è —ç–∫—Ä–∞–Ω–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
    let wifiMap = null;
    let wifiMarkers = [];
    const wifiHotspots = [
      {city: '–ü–∞—Ä–∏–∂', name: 'CDG –∞—ç—Ä–æ–ø–æ—Ä—Ç ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Wi‚ÄëFi', lat: 49.0097, lng: 2.5479, type: 'free'},
      {city: '–ë–µ—Ä–ª–∏–Ω', name: 'Berlin Hbf ‚Äî Wi‚ÄëFi –≤ –∑–∞–ª–µ –æ–∂–∏–¥–∞–Ω–∏—è', lat: 52.5251, lng: 13.3694, type: 'free'},
      {city: '–°—Ç–∞–º–±—É–ª', name: '–ö–∞—Ñ–µ –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º —Ü–µ–Ω—Ç—Ä–µ', lat: 41.0082, lng: 28.9784, type: 'cafe'},
      {city: '–¢–æ–∫–∏–æ', name: 'Tokyo Station ‚Äî —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä', lat: 35.6812, lng: 139.7671, type: 'free'},
      {city: '–ë–∞—Ä—Å–µ–ª–æ–Ω–∞', name: '–ü–ª—è–∂–Ω–∞—è –∑–æ–Ω–∞ —Å –≥–æ—Ä–æ–¥—Å–∫–∏–º Wi‚ÄëFi', lat: 41.3851, lng: 2.1734, type: 'city'}
    ];
    
    let selectedCountry = null;
    let filteredCountries = [...countries]; // –ö–æ–ø–∏—è –º–∞—Å—Å–∏–≤–∞
    let routeCountries = [];
    let selectedPayment = null;
    let selectedRegion = null;
    
    const paymentMethods = [
      {id: 'card', name: '–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞', icon: 'card'},
      {id: 'apple', name: 'Apple Pay', icon: 'apple'},
      {id: 'google', name: 'Google Pay', icon: 'google'},
      {id: 'paypal', name: 'PayPal', icon: 'paypal'},
    ];
    
    function getPaymentIcon(type) {
      const icons = {
        card: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10H23"/></svg>',
        apple: '<svg width="20" height="20" viewBox="0 0 24 24" fill="#1A1A1A"><path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/></svg>',
        google: '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1A1A1A" stroke-width="2"><path d="M17.788 5.108A9 9 0 1 0 21 12h-8V7.5h8a9 9 0 0 0-3.212-2.392z"/></svg>',
        paypal: '<svg width="20" height="20" viewBox="0 0 24 24" fill="#1A1A1A"><path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a.915.915 0 0 0-.272-.725c-.03-.03-.06-.058-.09-.085-.266-.24-.6-.4-.96-.48a.76.76 0 0 0-.195-.03c-.196 0-.392.03-.576.09-.03 0-.06.015-.09.03-.196.06-.392.15-.558.27-.03.03-.06.045-.09.075a.975.975 0 0 0-.3.66c-.015.12-.015.24 0 .36.03.27.15.51.33.705.045.045.09.075.135.105.18.135.39.24.615.315.195.06.405.09.615.09.24 0 .48-.045.705-.12.27-.09.51-.24.705-.435.195-.195.33-.435.39-.705.03-.135.045-.27.045-.405 0-.21-.045-.42-.135-.615z"/></svg>'
      };
      return icons[type] || icons.card;
    }
    
    function formatPrice(price, currency) {
      return new Intl.NumberFormat('ru-RU', {
        style: 'currency',
        currency: currency,
        minimumFractionDigits: 2,
      }).format(price);
    }
    
    function showScreen(screenId) {
      try {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
        document.querySelectorAll('.screen').forEach(s => {
          if (s) s.classList.remove('active');
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω
        const targetScreen = document.getElementById(screenId);
        if (!targetScreen) {
          console.error('–≠–∫—Ä–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω:', screenId);
          return;
        }
        targetScreen.classList.add('active');
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±—ã
        document.querySelectorAll('.tab').forEach(t => {
          if (t) t.classList.remove('active');
        });
        
        if (screenId === 'homeScreen') {
          const tab = document.querySelectorAll('.tab')[0];
          if (tab) tab.classList.add('active');
          renderCountries();
        } else if (screenId === 'ordersScreen') {
          const tab = document.querySelectorAll('.tab')[1];
          if (tab) tab.classList.add('active');
        } else if (screenId === 'newsScreen') {
          const tab = document.querySelectorAll('.tab')[2];
          if (tab) tab.classList.add('active');
          renderNewsScreen();
        } else if (screenId === 'profileScreen') {
          const tab = document.querySelectorAll('.tab')[3];
          if (tab) tab.classList.add('active');
        } else if (screenId === 'mapScreen') {
          renderMapScreen();
        } else if (screenId === 'multiCountryScreen') {
          renderMultiCountryScreen();
        } else if (screenId === 'calculatorScreen') {
          if ((calculatorCountries && calculatorCountries.length > 0) || selectedCountry) {
            renderCalculator();
          }
        } else if (screenId === 'plansScreen') {
          renderPlansScreen();
        }
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —ç–∫—Ä–∞–Ω–∞:', error);
      }
    }
    
    function selectData(gb) {
      calculatorData = gb;
      document.querySelectorAll('[id^="data"]').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById('data' + gb).classList.add('active');
      renderCalculator();
    }
    
    function selectDays(days) {
      calculatorDays = days;
      document.querySelectorAll('[id^="days"]').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById('days' + days).classList.add('active');
      renderCalculator();
    }
    
    function renderCalculator() {
      const countries = calculatorCountries.length > 0 ? calculatorCountries : [selectedCountry];
      if (!countries || countries.length === 0) {
        document.getElementById('calculatedPlans').innerHTML = '<div style="text-align: center; padding: 40px; color: #666;">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ</div>';
        return;
      }
      
      const avgPrice = countries.reduce((sum, c) => sum + c.price.min, 0) / countries.length;
      const currency = countries[0].price.currency;
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–ª–∞–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
      const plans = [];
      
      // –ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω
      if (calculatorData <= 5) {
        plans.push({
          name: '–ë–∞–∑–æ–≤—ã–π',
          data: '5GB',
          validity: calculatorDays <= 7 ? 7 : calculatorDays,
          price: avgPrice * 0.8,
          description: '–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–µ–∑–¥–æ–∫',
          features: ['5GB –¥–∞–Ω–Ω—ã—Ö', `${calculatorDays <= 7 ? 7 : calculatorDays} –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è`, '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å']
        });
      }
      
      // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–ª–∞–Ω
      if (calculatorData <= 10) {
        plans.push({
          name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
          data: '10GB',
          validity: calculatorDays <= 14 ? 14 : calculatorDays,
          price: avgPrice * 1.2,
          description: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä',
          features: ['10GB –¥–∞–Ω–Ω—ã—Ö', `${calculatorDays <= 14 ? 14 : calculatorDays} –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è`, '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
          popular: true
        });
      }
      
      // –ü—Ä–µ–º–∏—É–º –ø–ª–∞–Ω
      if (calculatorData >= 15) {
        plans.push({
          name: '–ü—Ä–µ–º–∏—É–º',
          data: calculatorData >= 50 ? '50GB' : '20GB',
          validity: calculatorDays <= 30 ? 30 : calculatorDays,
          price: avgPrice * 1.8,
          description: '–î–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–∫',
          features: [`${calculatorData >= 50 ? '50GB' : '20GB'} –¥–∞–Ω–Ω—ã—Ö`, `${calculatorDays <= 30 ? 30 : calculatorDays} –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è`, '5G —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞', '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞']
        });
      }
      
      // –ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–π –ø–ª–∞–Ω (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω)
      if (calculatorCountries.length > 1) {
        plans.push({
          name: '–ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–π',
          data: calculatorData >= 20 ? '20GB' : '10GB',
          validity: calculatorDays <= 30 ? 30 : calculatorDays,
          price: avgPrice * calculatorCountries.length * 1.5,
          description: `–†–∞–±–æ—Ç–∞–µ—Ç –≤ ${calculatorCountries.length} —Å—Ç—Ä–∞–Ω–∞—Ö`,
          features: [`${calculatorData >= 20 ? '20GB' : '10GB'} –¥–∞–Ω–Ω—ã—Ö`, `${calculatorDays <= 30 ? 30 : calculatorDays} –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è`, `${calculatorCountries.length} —Å—Ç—Ä–∞–Ω`, '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
          multi: true
        });
      }
      
      const plansHtml = plans.map((plan, index) => `
        <div class="card" style="position: relative; ${plan.popular ? 'border: 2px solid #F97316;' : ''}" onclick="selectPlanFromCalculator(${index})">
          ${plan.popular ? '<div style="position: absolute; top: 12px; right: 12px; background: #F97316; color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 700;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>' : ''}
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
            <div>
              <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">${plan.name}</div>
              <div style="font-size: 20px; font-weight: 700; color: #F97316; margin-bottom: 4px;">${plan.data}</div>
              <div style="font-size: 13px; color: #666;">–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω ${plan.validity} –¥–Ω–µ–π</div>
            </div>
            <div style="text-align: right;">
              <div style="font-size: 24px; font-weight: 700; color: #F97316;">${formatPrice(plan.price, currency)}</div>
            </div>
          </div>
          <div style="font-size: 14px; color: #666; margin-bottom: 12px;">${plan.description}</div>
          <div style="display: flex; flex-direction: column; gap: 6px;">
            ${plan.features.map(feature => `
              <div style="display: flex; align-items: center; font-size: 13px;">
                <span style="color: #10B981; margin-right: 8px; font-weight: 700;">‚úì</span>
                <span>${feature}</span>
              </div>
            `).join('')}
          </div>
          <button class="btn" style="margin-top: 16px; padding: 12px;" onclick="event.stopPropagation(); selectPlanFromCalculator(${index})">–í—ã–±—Ä–∞—Ç—å –ø–ª–∞–Ω</button>
        </div>
      `).join('');
      
      document.getElementById('calculatedPlans').innerHTML = plansHtml;
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–ª–∞–Ω—ã –¥–ª—è –≤—ã–±–æ—Ä–∞
      window.calculatorPlans = plans;
    }
    
    function selectPlanFromCalculator(index) {
      selectedPlan = window.calculatorPlans[index];
      selectedPlanType = selectedPlan.multi ? 'multi' : 'local';
      if (selectedPlan.multi) {
        selectedMultiCountries = calculatorCountries;
      }
      showScreen('purchaseScreen');
      renderPurchaseScreen();
    }
    
    function logout() {
      if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
        alert('–í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω');
      }
    }
    
    function inviteFriend() {
      const referralCode = 'YESIM' + Math.random().toString(36).substr(2, 6).toUpperCase();
      const referralLink = `https://yesim.app/invite/${referralCode}`;
      
      if (navigator.share) {
        navigator.share({
          title: '–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ Yesim',
          text: `–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ Yesim –∏ –ø–æ–ª—É—á–∏ —Å–∫–∏–¥–∫—É! –ò—Å–ø–æ–ª—å–∑—É–π –º–æ–π –ø—Ä–æ–º–æ–∫–æ–¥: ${referralCode}`,
          url: referralLink
        }).then(() => {
          alert('–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! –í—ã –ø–æ–ª—É—á–∏—Ç–µ ‚Ç¨5 –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥—Ä—É–≥–∞.');
        }).catch(err => {
          // –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ –µ—Å–ª–∏ share –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
          navigator.clipboard.writeText(referralLink).then(() => {
            alert(`–ü—Ä–æ–º–æ–∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ${referralCode}\n–í—ã –ø–æ–ª—É—á–∏—Ç–µ ‚Ç¨5 –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥—Ä—É–≥–∞.`);
          });
        });
      } else {
        navigator.clipboard.writeText(referralLink).then(() => {
          alert(`–ü—Ä–æ–º–æ–∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ${referralCode}\n–í—ã –ø–æ–ª—É—á–∏—Ç–µ ‚Ç¨5 –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥—Ä—É–≥–∞.`);
        });
      }
    }
    
    function buyForFriend() {
      // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–ª–∞–Ω–∞
      showScreen('homeScreen');
      // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥, —á—Ç–æ –ø–æ–∫—É–ø–∫–∞ –¥–ª—è –¥—Ä—É–≥–∞
      window.buyingForFriend = true;
      alert('–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω –¥–ª—è –¥—Ä—É–≥–∞. –ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å QR-–∫–æ–¥.');
    }
    
    let selectedFamilyTariff = null;
    let familyMembers = [];
    
    let yourPaymentStatus = 'pending'; // 'pending', 'paid'
    
    function showFamilyPlan() {
      selectedFamilyTariff = null;
      familyMembers = [
        {id: 1, name: '–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞', email: 'maria@example.com', status: 'joined', paymentStatus: 'paid'},
        {id: 2, name: '–ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤', email: 'alex@example.com', status: 'joined', paymentStatus: 'pending'},
        {id: 3, name: '–ï–ª–µ–Ω–∞ –°–º–∏—Ä–Ω–æ–≤–∞', email: 'elena@example.com', status: 'pending', paymentStatus: 'pending'}
      ];
      yourPaymentStatus = 'pending';
      showScreen('familyPlanScreen');
      renderFamilyPlanScreen();
    }
    
    function renderFamilyPlanScreen() {
      updateFamilyPlanDisplay();
    }
    
    function selectFamilyTariff(tariffType) {
      const tariffs = {
        basic: { name: '–ë–∞–∑–æ–≤—ã–π', data: '15GB', validity: 30, maxUsers: 3, price: 39.99, currency: 'EUR' },
        standard: { name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π', data: '30GB', validity: 30, maxUsers: 5, price: 59.99, currency: 'EUR' },
        premium: { name: '–ü—Ä–µ–º–∏—É–º', data: '50GB', validity: 30, maxUsers: 5, price: 89.99, currency: 'EUR' }
      };
      
      selectedFamilyTariff = tariffs[tariffType];
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤
      document.querySelectorAll('#familyPlanOptions .plan-card').forEach(card => {
        card.style.border = '1px solid #E5E7EB';
        card.style.background = 'white';
      });
      
      const selectedCard = document.getElementById(`familyTariff${tariffType.charAt(0).toUpperCase() + tariffType.slice(1)}`);
      if (selectedCard) {
        selectedCard.style.border = '2px solid #F97316';
        selectedCard.style.background = '#FFF7ED';
      }
      
      updateFamilyPlanDisplay();
    }
    
    function updateFamilyPlanDisplay() {
      const card = document.getElementById('selectedFamilyPlanCard');
      const details = document.getElementById('familyPlanDetails');
      const totalPrice = document.getElementById('familyTotalPrice');
      const splitDetails = document.getElementById('familySplitDetails');
      const maxMembers = document.getElementById('familyMaxMembers');
      const membersCount = document.getElementById('familyMembersCount');
      const addBtn = document.getElementById('addFriendBtn');
      const payBtn = document.getElementById('familyPayBtn');
      const features = document.getElementById('familyPlanFeatures');
      const featuresCard = document.getElementById('familyPlanFeaturesCard');
      const yourShare = document.getElementById('yourShare');
      
      if (selectedFamilyTariff) {
        card.style.display = 'block';
        if (featuresCard) featuresCard.style.display = 'block';
        
        details.innerHTML = `
          <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">${selectedFamilyTariff.name}</div>
          <div style="font-size: 14px; color: #666; margin-bottom: 4px;">${selectedFamilyTariff.data} –¥–∞–Ω–Ω—ã—Ö ‚Ä¢ ${selectedFamilyTariff.validity} –¥–Ω–µ–π</div>
          <div style="font-size: 13px; color: #666;">–î–æ ${selectedFamilyTariff.maxUsers} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
        `;
        
        totalPrice.textContent = formatPrice(selectedFamilyTariff.price, selectedFamilyTariff.currency);
        maxMembers.textContent = selectedFamilyTariff.maxUsers;
        
        const totalMembers = familyMembers.length + 1; // +1 –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞
        membersCount.textContent = totalMembers;
        
        const pricePerPerson = selectedFamilyTariff.price / totalMembers;
        splitDetails.innerHTML = `
          <div style="margin-bottom: 8px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
              <span>–° –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞:</span>
              <span style="font-weight: 600;">${formatPrice(pricePerPerson, selectedFamilyTariff.currency)}</span>
            </div>
            <div style="font-size: 12px; color: #999;">–≠–∫–æ–Ω–æ–º–∏—è: ${formatPrice(selectedFamilyTariff.price - (pricePerPerson * totalMembers), selectedFamilyTariff.currency)}</div>
          </div>
        `;
        
        yourShare.textContent = formatPrice(pricePerPerson, selectedFamilyTariff.currency);
        
        // –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞
        const yourPaymentStatusEl = document.getElementById('yourPaymentStatus');
        const yourPayBtn = document.getElementById('yourPayBtn');
        if (yourPaymentStatusEl) {
          if (yourPaymentStatus === 'paid') {
            yourPaymentStatusEl.innerHTML = '<span style="color: #10B981; font-weight: 600;">‚úì –û–ø–ª–∞—á–µ–Ω–æ</span>';
            if (yourPayBtn) yourPayBtn.style.display = 'none';
          } else {
            yourPaymentStatusEl.innerHTML = '<span style="color: #F97316; font-weight: 600;">–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã</span>';
            if (yourPayBtn) yourPayBtn.style.display = 'block';
          }
        }
        
        if (totalMembers < selectedFamilyTariff.maxUsers) {
          addBtn.style.display = 'block';
        } else {
          addBtn.style.display = 'none';
        }
        
        if (totalMembers >= 2) {
          payBtn.style.display = 'block';
        } else {
          payBtn.style.display = 'none';
        }
        
        if (features) {
          features.innerHTML = `
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div style="display: flex; align-items: center; gap: 12px;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                  <path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span style="font-size: 14px;">${selectedFamilyTariff.data} –¥–∞–Ω–Ω—ã—Ö –æ–±—â–∏—Ö –¥–ª—è –≤—Å–µ—Ö</span>
              </div>
              <div style="display: flex; align-items: center; gap: 12px;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                  <path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span style="font-size: 14px;">${selectedFamilyTariff.validity} –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è</span>
              </div>
              <div style="display: flex; align-items: center; gap: 12px;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                  <path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span style="font-size: 14px;">–î–æ ${selectedFamilyTariff.maxUsers} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
              </div>
              <div style="display: flex; align-items: center; gap: 12px;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                  <path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span style="font-size: 14px;">4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å</span>
              </div>
              <div style="display: flex; align-items: center; gap: 12px;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                  <path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span style="font-size: 14px;">–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞</span>
              </div>
            </div>
          `;
        }
        
        renderFamilyMembers();
      } else {
        card.style.display = 'none';
        if (featuresCard) featuresCard.style.display = 'none';
        addBtn.style.display = 'none';
        payBtn.style.display = 'none';
      }
    }
    
    function renderFamilyMembers() {
      const list = document.getElementById('familyMembersList');
      if (familyMembers.length === 0) {
        list.innerHTML = '<div style="text-align: center; padding: 20px; color: #999; font-size: 14px;">–î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å</div>';
        return;
      }
      
      const pricePerPerson = selectedFamilyTariff ? selectedFamilyTariff.price / (familyMembers.length + 1) : 0;
      
      list.innerHTML = familyMembers.map((member, index) => {
        const isPaid = member.paymentStatus === 'paid';
        const isJoined = member.status === 'joined';
        
        return `
        <div style="display: flex; align-items: center; padding: 12px; background: #F9FAFB; border-radius: 12px; margin-bottom: 12px;">
          <div style="width: 40px; height: 40px; border-radius: 20px; background: ${isPaid ? '#DCFCE7' : '#E5E7EB'}; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
            ${isPaid ? `
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9 12l2 2 4-4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            ` : `
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2">
                <circle cx="12" cy="8" r="4"/>
                <path d="M6 21C6 17.6863 8.68629 15 12 15C15.3137 15 18 17.6863 18 21" stroke-linecap="round"/>
              </svg>
            `}
          </div>
          <div style="flex: 1;">
            <div style="font-weight: 600; font-size: 15px;">${member.name || member.email}</div>
            <div style="font-size: 12px; color: #666; margin-bottom: 4px;">
              ${!isJoined ? '–û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è' : isPaid ? '–£—á–∞—Å—Ç–Ω–∏–∫ ‚Ä¢ –û–ø–ª–∞—á–µ–Ω–æ' : '–£—á–∞—Å—Ç–Ω–∏–∫ ‚Ä¢ –û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã'}
            </div>
          </div>
          <div style="text-align: right;">
            <div style="font-size: 16px; font-weight: 700; color: ${isPaid ? '#10B981' : '#F97316'}; margin-bottom: 4px;">
              ${formatPrice(pricePerPerson, selectedFamilyTariff.currency)}
            </div>
            ${isPaid ? 
              '<div style="font-size: 11px; color: #10B981; font-weight: 600;">‚úì –û–ø–ª–∞—á–µ–Ω–æ</div>' : 
              '<div style="font-size: 11px; color: #F97316;">–û–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã</div>'
            }
          </div>
        </div>
      `;
      }).join('');
    }
    
    function payYourShare() {
      if (!selectedFamilyTariff) return;
      
      const pricePerPerson = selectedFamilyTariff.price / (familyMembers.length + 1);
      
      if (confirm(`–û–ø–ª–∞—Ç–∏—Ç—å —Å–≤–æ—é –¥–æ–ª—é ${formatPrice(pricePerPerson, selectedFamilyTariff.currency)}?`)) {
        yourPaymentStatus = 'paid';
        updateFamilyPlanDisplay();
        alert('–û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!');
      }
    }
    
    function addFamilyMember() {
      if (!selectedFamilyTariff) {
        alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ');
        return;
      }
      
      const totalMembers = familyMembers.length + 1;
      if (totalMembers >= selectedFamilyTariff.maxUsers) {
        alert(`–ú–∞–∫—Å–∏–º—É–º ${selectedFamilyTariff.maxUsers} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤`);
        return;
      }
      
      const email = prompt('–í–≤–µ–¥–∏—Ç–µ email –¥—Ä—É–≥–∞:');
      if (!email) return;
      
      const name = prompt('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥—Ä—É–≥–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):') || email.split('@')[0];
      
      const member = {
        id: Date.now(),
        name: name,
        email: email,
        status: 'pending'
      };
      
      familyMembers.push(member);
      updateFamilyPlanDisplay();
      
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
      sendFamilyInvitation(member);
    }
    
    function sendFamilyInvitation(member) {
      const tariffName = selectedFamilyTariff.name;
      const totalPrice = selectedFamilyTariff.price;
      const totalMembers = familyMembers.length + 1;
      const pricePerPerson = totalPrice / totalMembers;
      const invitationLink = `https://yesim.app/family/join/${Date.now()}`;
      
      const message = `–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ —Å–µ–º–µ–π–Ω–æ–º—É –ø–∞–∫–µ—Ç—É "${tariffName}"!

–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${formatPrice(totalPrice, selectedFamilyTariff.currency)}
–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: ${totalMembers}
–¢–≤–æ—è –¥–æ–ª—è: ${formatPrice(pricePerPerson, selectedFamilyTariff.currency)}

–í–∫–ª—é—á–µ–Ω–æ:
‚Ä¢ ${selectedFamilyTariff.data} –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ ${selectedFamilyTariff.validity} –¥–Ω–µ–π
‚Ä¢ 4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å

–ü–µ—Ä–µ–π–¥–∏ –ø–æ —Å—Å—ã–ª–∫–µ, —á—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è:
${invitationLink}`;
      
      if (navigator.share) {
        navigator.share({
          title: '–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ —Å–µ–º–µ–π–Ω—ã–π –ø–∞–∫–µ—Ç',
          text: message,
          url: invitationLink
        }).then(() => {
          alert(`–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ${member.name}!`);
        }).catch(err => {
          navigator.clipboard.writeText(message).then(() => {
            alert(`–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ –¥–ª—è ${member.name}`);
          });
        });
      } else {
        navigator.clipboard.writeText(message).then(() => {
          alert(`–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ –¥–ª—è ${member.name}`);
        });
      }
    }
    
    function proceedFamilyPayment() {
      if (familyMembers.length === 0) {
        alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –¥—Ä—É–≥–∞');
        return;
      }
      
      selectedPlan = {
        name: selectedFamilyTariff.name,
        data: selectedFamilyTariff.data,
        validity: selectedFamilyTariff.validity,
        price: selectedFamilyTariff.price / (familyMembers.length + 1), // –¶–µ–Ω–∞ –∑–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞
        currency: selectedFamilyTariff.currency,
        type: 'family',
        totalPrice: selectedFamilyTariff.price,
        members: familyMembers.length + 1
      };
      
      showScreen('purchaseScreen');
      renderPurchaseScreen();
    }
    
    function renderMultiCountryScreen() {
      const allCountries = countries;
      const banner = document.getElementById('selectedCountriesBanner');
      const confirmBtn = document.getElementById('confirmMultiBtn');
      
      if (selectedMultiCountries.length > 0) {
        banner.style.display = 'block';
        document.getElementById('selectedCount').textContent = selectedMultiCountries.length;
        confirmBtn.style.display = 'block';
      } else {
        banner.style.display = 'none';
        confirmBtn.style.display = 'none';
      }
      
      const list = document.getElementById('multiCountriesList');
      list.innerHTML = allCountries.map(country => {
        const isSelected = selectedMultiCountries.some(c => c.id === country.id);
        const canSelect = selectedMultiCountries.length < selectedPlan.maxCountries;
        return `
          <div class="country-card ${isSelected ? 'selected' : ''} ${!isSelected && !canSelect ? 'style="opacity: 0.5; cursor: not-allowed;"' : ''}" 
               onclick="${!isSelected && !canSelect ? '' : `toggleMultiCountry('${country.id}')`}">
            <span class="flag">${country.flag}</span>
            <div class="country-info">
              <div class="country-name">${country.name}</div>
              <div class="country-region">${country.region}</div>
            </div>
            <div class="country-price">
              ${formatPrice(country.price.min, country.price.currency)}
              <span class="country-price-label">–æ—Ç</span>
            </div>
            ${isSelected ? '<svg class="checkmark" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2.5"><path d="M20 6L9 17L4 12" stroke-linecap="round" stroke-linejoin="round"/></svg>' : ''}
          </div>
        `;
      }).join('');
      
      document.getElementById('multiSectionTitle').textContent = `${allCountries.length} —Å—Ç—Ä–∞–Ω`;
    }
    
    function toggleMultiCountry(countryId) {
      const country = countries.find(c => c.id === countryId);
      const index = selectedMultiCountries.findIndex(c => c.id === countryId);
      
      if (index > -1) {
        selectedMultiCountries.splice(index, 1);
      } else {
        if (selectedMultiCountries.length < selectedPlan.maxCountries) {
          selectedMultiCountries.push(country);
        } else {
          alert(`–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º—É–º ${selectedPlan.maxCountries} —Å—Ç—Ä–∞–Ω`);
          return;
        }
      }
      
      renderMultiCountryScreen();
    }
    
    function confirmMultiCountries() {
      if (selectedMultiCountries.length === 0) {
        alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Ç—Ä–∞–Ω—É');
        return;
      }
      showScreen('purchaseScreen');
      renderPurchaseScreen();
    }
    
    function renderCountries() {
      const list = document.getElementById('countriesList');
      if (!list) return;
      
      // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ filteredCountries –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
      if (!filteredCountries || filteredCountries.length === 0) {
        filteredCountries = countries;
      }
      
      if (filteredCountries.length === 0) {
        list.innerHTML = '<div class="card" style="text-align: center; padding: 40px; color: #666;">–°—Ç—Ä–∞–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
        return;
      }
      
      list.innerHTML = filteredCountries.map(country => `
        <div class="country-card ${selectedCountry?.id === country.id ? 'selected' : ''}" 
             onclick="selectCountry('${country.id}')">
          <span class="flag">${country.flag}</span>
          <div class="country-info">
            <div class="country-name">${country.name}</div>
            <div class="country-region">${country.region}</div>
          </div>
          <div class="country-price">
            ${formatPrice(country.price.min, country.price.currency)}
            <span class="country-price-label">–æ—Ç</span>
          </div>
          ${selectedCountry?.id === country.id ? '<svg class="checkmark" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2.5"><path d="M20 6L9 17L4 12" stroke-linecap="round" stroke-linejoin="round"/></svg>' : ''}
        </div>
      `).join('');
      
      // –†–µ–Ω–¥–µ—Ä–∏–º –ø–∞–∫–µ—Ç—ã –¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤
      renderRegionPackages();
    }
    
    function renderRegionPackages() {
      const packagesContainer = document.getElementById('regionPackages');
      if (!packagesContainer) return;
      
      const regionPackages = [
        {
          id: 'europe',
          name: '–ï–≤—Ä–æ–ø–∞',
          region: '–ï–≤—Ä–æ–ø–∞',
          countries: ['–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è', '–ì–µ—Ä–º–∞–Ω–∏—è', '–§—Ä–∞–Ω—Ü–∏—è', '–ò—Å–ø–∞–Ω–∏—è', '–ò—Ç–∞–ª–∏—è'],
          data: '10GB',
          validity: 14,
          price: 24.99,
          currency: 'EUR',
          icon: 'üá™üá∫'
        },
        {
          id: 'asia',
          name: '–ê–∑–∏—è',
          region: '–ê–∑–∏—è',
          countries: ['–Ø–ø–æ–Ω–∏—è', '–Æ–∂–Ω–∞—è –ö–æ—Ä–µ—è'],
          data: '15GB',
          validity: 30,
          price: 29.99,
          currency: 'USD',
          icon: 'üåè'
        },
        {
          id: 'america',
          name: '–ê–º–µ—Ä–∏–∫–∞',
          region: '–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞',
          countries: ['–°–®–ê', '–ö–∞–Ω–∞–¥–∞'],
          data: '20GB',
          validity: 30,
          price: 34.99,
          currency: 'USD',
          icon: 'üåé'
        },
        {
          id: 'global',
          name: '–ì–ª–æ–±–∞–ª—å–Ω—ã–π',
          region: '–í–µ—Å—å –º–∏—Ä',
          countries: ['200+ —Å—Ç—Ä–∞–Ω'],
          data: '30GB',
          validity: 30,
          price: 49.99,
          currency: 'USD',
          icon: 'üåç'
        }
      ];
      
      packagesContainer.innerHTML = regionPackages.map(pkg => `
        <div class="package-card" onclick="selectRegionPackage('${pkg.id}')">
          <div class="package-region">${pkg.icon} ${pkg.region}</div>
          <div class="package-name">${pkg.name}</div>
          <div class="package-details">${pkg.data} ‚Ä¢ ${pkg.validity} –¥–Ω–µ–π</div>
          <div class="package-price">
            ${formatPrice(pkg.price, pkg.currency)}
            <span class="package-price-label">–æ—Ç</span>
          </div>
        </div>
      `).join('');
    }
    
    function selectRegionPackage(packageId) {
      const packages = {
        'europe': { countries: ['2', '3', '4', '5', '6'], region: '–ï–≤—Ä–æ–ø–∞' },
        'asia': { countries: ['7', '8'], region: '–ê–∑–∏—è' },
        'cis': { countries: ['13', '14', '15'], region: '–°–ù–ì' },
        'america': { countries: ['1', '10'], region: '–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞' },
        'middle-east': { countries: ['11', '12'], region: '–ë–ª–∏–∂–Ω–∏–π –í–æ—Å—Ç–æ–∫' },
        'oceania': { countries: ['9'], region: '–û–∫–µ–∞–Ω–∏—è' },
        'global': { countries: countries.map(c => c.id), region: '–í–µ—Å—å –º–∏—Ä' }
      };
      
      const selectedPackage = packages[packageId];
      if (!selectedPackage) return;
      
      // –§–∏–ª—å—Ç—Ä—É–µ–º —Å—Ç—Ä–∞–Ω—ã –ø–æ —Ä–µ–≥–∏–æ–Ω—É
      if (packageId === 'global') {
        filteredCountries = countries;
      } else {
        filteredCountries = countries.filter(c => selectedPackage.countries.includes(c.id) || c.region === selectedPackage.region);
      }
      
      renderCountries();
      
      // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–ø–∏—Å–∫—É —Å—Ç—Ä–∞–Ω
      document.getElementById('countriesList')?.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    function selectCountry(countryId) {
      selectedCountry = countries.find(c => c.id === countryId);
      if (!selectedCountry) return;
      
      renderCountries();
      
      // –°—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —ç–∫—Ä–∞–Ω —Ç–∞—Ä–∏—Ñ–æ–≤
      showScreen('plansScreen');
      renderPlansScreen();
    }
    
    function showPlans() {
      if (selectedCountry) {
        // –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–µ–∂–¥—É –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–º –∏ —Å–ø–∏—Å–∫–æ–º —Ç–∞—Ä–∏—Ñ–æ–≤
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        calculatorCountries = [selectedCountry];
        document.getElementById('calculatorSubtitle').textContent = selectedCountry.flag + ' ' + selectedCountry.name;
        showScreen('calculatorScreen');
        renderCalculator();
      }
    }
    
    function showAllCountries() {
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω—ã, —É–±–∏—Ä–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
      filteredCountries = [...countries];
      selectedRegion = null;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
      document.querySelectorAll('.filter-chip').forEach(chip => {
        chip.classList.remove('active');
      });
      const allChip = document.querySelector('.filter-chip');
      if (allChip) allChip.classList.add('active');
      
      // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
      const searchInput = document.getElementById('searchInput');
      if (searchInput) searchInput.value = '';
      
      // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
      const suggestionsEl = document.getElementById('searchSuggestions');
      if (suggestionsEl) suggestionsEl.classList.remove('show');
      
      // –†–µ–Ω–¥–µ—Ä–∏–º –≤—Å–µ —Å—Ç—Ä–∞–Ω—ã
      renderCountries();
      
      // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–ø–∏—Å–∫—É —Å—Ç—Ä–∞–Ω
      const countriesList = document.getElementById('countriesList');
      if (countriesList) {
        countriesList.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }
    
    function renderPlansScreen() {
      if (routeCountries.length > 0 && selectedMultiCountries.length === 0) {
        // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã —Å—Ç—Ä–∞–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ, –Ω–æ –µ—â–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
        selectedMultiCountries = routeCountries;
      }
      
      if (selectedPlanType === 'multi' && selectedMultiCountries.length > 0) {
        document.getElementById('plansCountryName').textContent = `${selectedMultiCountries.length} —Å—Ç—Ä–∞–Ω: ${selectedMultiCountries.map(c => c.flag).join(' ')}`;
      } else if (routeCountries.length > 0) {
        document.getElementById('plansCountryName').textContent = `${routeCountries.length} —Å—Ç—Ä–∞–Ω: ${routeCountries.map(c => c.flag).join(' ')}`;
      } else if (selectedCountry) {
        document.getElementById('plansCountryName').textContent = `${selectedCountry.flag} ${selectedCountry.name}`;
      }
      
      const localPlans = [
        {
          name: '–ë–∞–∑–æ–≤—ã–π',
          data: '5GB',
          validity: 7,
          price: selectedCountry.price.min,
          description: '–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–µ–∑–¥–æ–∫',
          features: ['5GB –¥–∞–Ω–Ω—ã—Ö', '7 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å'],
          type: 'local'
        },
        {
          name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
          data: '10GB',
          validity: 14,
          price: selectedCountry.price.min + (selectedCountry.price.max - selectedCountry.price.min) * 0.4,
          description: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä',
          features: ['10GB –¥–∞–Ω–Ω—ã—Ö', '14 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
          popular: true,
          type: 'local'
        },
        {
          name: '–ü—Ä–µ–º–∏—É–º',
          data: '20GB',
          validity: 30,
          price: selectedCountry.price.max,
          description: '–î–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–∫',
          features: ['20GB –¥–∞–Ω–Ω—ã—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '5G —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞', '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞'],
          type: 'local'
        }
      ];
      
      // –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã
      const regionPlans = [];
      if (selectedCountry.region === '–ï–≤—Ä–æ–ø–∞') {
        regionPlans.push({
          name: '–ï–≤—Ä–æ–ø–∞',
          data: '15GB',
          validity: 30,
          price: selectedCountry.price.max * 1.5,
          description: '–†–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –ï–≤—Ä–æ–ø—ã',
          features: ['15GB –¥–∞–Ω–Ω—ã—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '–†–∞–±–æ—Ç–∞–µ—Ç –≤ 40+ —Å—Ç—Ä–∞–Ω–∞—Ö –ï–≤—Ä–æ–ø—ã', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
          type: 'regional',
          countries: 40
        });
      }
      
      // –ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–µ –ø–ª–∞–Ω—ã
      const multiCountryPlans = [
        {
          name: '–ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–π',
          data: '10GB',
          validity: 30,
          price: selectedCountry.price.max * 2,
          description: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 5 —Å—Ç—Ä–∞–Ω',
          features: ['10GB –¥–∞–Ω–Ω—ã—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '–î–æ 5 —Å—Ç—Ä–∞–Ω –Ω–∞ –≤—ã–±–æ—Ä', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
          type: 'multi',
          maxCountries: 5
        },
        {
          name: '–ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–π –ü—Ä–µ–º–∏—É–º',
          data: '20GB',
          validity: 30,
          price: selectedCountry.price.max * 3,
          description: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 10 —Å—Ç—Ä–∞–Ω',
          features: ['20GB –¥–∞–Ω–Ω—ã—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '–î–æ 10 —Å—Ç—Ä–∞–Ω –Ω–∞ –≤—ã–±–æ—Ä', '5G —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞', '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞'],
          type: 'multi',
          maxCountries: 10
        }
      ];
      
      // –ü–ª–∞–Ω—ã –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
      const multiUserPlans = [
        {
          name: '–°–µ–º–µ–π–Ω—ã–π',
          data: '30GB',
          validity: 30,
          price: selectedCountry.price.max * 2.5,
          description: '–î–ª—è 3-5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
          features: ['30GB –¥–∞–Ω–Ω—ã—Ö –æ–±—â–∏—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '3-5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
          type: 'multiUser',
          users: '3-5'
        }
      ];
      
      const plansList = document.getElementById('plansList');
      
      let html = '<div class="section-title" style="font-size: 16px; margin-bottom: 12px; padding: 0 4px;">–õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã</div>';
      html += localPlans.map((plan, index) => renderPlanCard(plan, index, 'local')).join('');
      
      if (regionPlans.length > 0) {
        html += '<div class="section-title" style="font-size: 16px; margin: 24px 0 12px; padding: 0 4px;">–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã</div>';
        html += regionPlans.map((plan, index) => renderPlanCard(plan, localPlans.length + index, 'regional')).join('');
      }
      
      html += '<div class="section-title" style="font-size: 16px; margin: 24px 0 12px; padding: 0 4px;">–ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–µ –ø–ª–∞–Ω—ã</div>';
      html += multiCountryPlans.map((plan, index) => renderPlanCard(plan, localPlans.length + regionPlans.length + index, 'multi')).join('');
      
      html += '<div class="section-title" style="font-size: 16px; margin: 24px 0 12px; padding: 0 4px;">–ü–ª–∞–Ω—ã –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>';
      html += multiUserPlans.map((plan, index) => renderPlanCard(plan, localPlans.length + regionPlans.length + multiCountryPlans.length + index, 'multiUser')).join('');
      
      plansList.innerHTML = html;
    }
    
    function renderPlanCard(plan, index, type) {
      const typeLabels = {
        local: '–õ–æ–∫–∞–ª—å–Ω—ã–π',
        regional: '–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π',
        multi: '–ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–π',
        multiUser: '–°–µ–º–µ–π–Ω—ã–π'
      };
      
      return `
        <div class="card" style="position: relative; ${plan.popular ? 'border: 2px solid #F97316;' : ''}" onclick="selectPlan(${index}, '${type}')">
          ${plan.popular ? '<div style="position: absolute; top: 12px; right: 12px; background: #F97316; color: white; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 700;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>' : ''}
          <div style="position: absolute; top: 12px; left: 12px; background: #FFF7ED; color: #F97316; padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; border: 1px solid #FED7AA;">${typeLabels[type]}</div>
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; margin-top: 32px;">
            <div>
              <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">${plan.name}</div>
              <div style="font-size: 20px; font-weight: 700; color: #F97316; margin-bottom: 4px;">${plan.data}</div>
              <div style="font-size: 13px; color: #666;">–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω ${plan.validity} –¥–Ω–µ–π</div>
              ${plan.countries ? `<div style="font-size: 13px; color: #666; margin-top: 2px;">${plan.countries} —Å—Ç—Ä–∞–Ω</div>` : ''}
              ${plan.maxCountries ? `<div style="font-size: 13px; color: #666; margin-top: 2px;">–î–æ ${plan.maxCountries} —Å—Ç—Ä–∞–Ω</div>` : ''}
              ${plan.users ? `<div style="font-size: 13px; color: #666; margin-top: 2px;">${plan.users} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>` : ''}
            </div>
            <div style="text-align: right;">
              <div style="font-size: 24px; font-weight: 700; color: #F97316;">${formatPrice(plan.price, selectedCountry.price.currency)}</div>
            </div>
          </div>
          <div style="font-size: 14px; color: #666; margin-bottom: 12px;">${plan.description}</div>
          <div style="display: flex; flex-direction: column; gap: 6px;">
            ${plan.features.map(feature => `
              <div style="display: flex; align-items: center; font-size: 13px;">
                <span style="color: #10B981; margin-right: 8px; font-weight: 700;">‚úì</span>
                <span>${feature}</span>
              </div>
            `).join('')}
          </div>
          <button class="btn" style="margin-top: 16px; padding: 12px;" onclick="event.stopPropagation(); selectPlan(${index}, '${type}')">–í—ã–±—Ä–∞—Ç—å –ø–ª–∞–Ω</button>
        </div>
      `;
    }
    
    let selectedPlan = null;
    let selectedPlanType = 'local';
    let selectedMultiCountries = [];
    let calculatorCountries = [];
    let calculatorData = 10;
    let calculatorDays = 14;
    
    function selectPlan(planIndex, type) {
      selectedPlanType = type;
      
      // –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã
      if (type === 'local') {
        const localPlans = [
          {
            name: '–ë–∞–∑–æ–≤—ã–π',
            data: '5GB',
            validity: 7,
            price: selectedCountry.price.min,
            description: '–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–µ–∑–¥–æ–∫',
            features: ['5GB –¥–∞–Ω–Ω—ã—Ö', '7 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å']
          },
          {
            name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
            data: '10GB',
            validity: 14,
            price: selectedCountry.price.min + (selectedCountry.price.max - selectedCountry.price.min) * 0.4,
            description: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä',
            features: ['10GB –¥–∞–Ω–Ω—ã—Ö', '14 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
            popular: true
          },
          {
            name: '–ü—Ä–µ–º–∏—É–º',
            data: '20GB',
            validity: 30,
            price: selectedCountry.price.max,
            description: '–î–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–∫',
            features: ['20GB –¥–∞–Ω–Ω—ã—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '5G —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞', '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞']
          }
        ];
        selectedPlan = localPlans[planIndex];
      }
      // –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã
      else if (type === 'regional') {
        selectedPlan = {
          name: '–ï–≤—Ä–æ–ø–∞',
          data: '15GB',
          validity: 30,
          price: selectedCountry.price.max * 1.5,
          description: '–†–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –ï–≤—Ä–æ–ø—ã',
          features: ['15GB –¥–∞–Ω–Ω—ã—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '–†–∞–±–æ—Ç–∞–µ—Ç –≤ 40+ —Å—Ç—Ä–∞–Ω–∞—Ö –ï–≤—Ä–æ–ø—ã', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
          countries: 40
        };
      }
      // –ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–µ –ø–ª–∞–Ω—ã
      else if (type === 'multi') {
        const multiPlans = [
          {
            name: '–ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–π',
            data: '10GB',
            validity: 30,
            price: selectedCountry.price.max * 2,
            description: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 5 —Å—Ç—Ä–∞–Ω',
            features: ['10GB –¥–∞–Ω–Ω—ã—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '–î–æ 5 —Å—Ç—Ä–∞–Ω –Ω–∞ –≤—ã–±–æ—Ä', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
            maxCountries: 5
          },
          {
            name: '–ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–π –ü—Ä–µ–º–∏—É–º',
            data: '20GB',
            validity: 30,
            price: selectedCountry.price.max * 3,
            description: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 10 —Å—Ç—Ä–∞–Ω',
            features: ['20GB –¥–∞–Ω–Ω—ã—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '–î–æ 10 —Å—Ç—Ä–∞–Ω –Ω–∞ –≤—ã–±–æ—Ä', '5G —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞', '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞'],
            maxCountries: 10
          }
        ];
        selectedPlan = multiPlans[planIndex - (localPlans.length + (selectedCountry.region === '–ï–≤—Ä–æ–ø–∞' ? 1 : 0))];
        selectedMultiCountries = [selectedCountry]; // –ù–∞—á–∏–Ω–∞–µ–º —Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã
        showScreen('multiCountryScreen');
        renderMultiCountryScreen();
        return;
      }
      // –ü–ª–∞–Ω—ã –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
      else if (type === 'multiUser') {
        selectedPlan = {
          name: '–°–µ–º–µ–π–Ω—ã–π',
          data: '30GB',
          validity: 30,
          price: selectedCountry.price.max * 2.5,
          description: '–î–ª—è 3-5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
          features: ['30GB –¥–∞–Ω–Ω—ã—Ö –æ–±—â–∏—Ö', '30 –¥–Ω–µ–π –¥–µ–π—Å—Ç–≤–∏—è', '3-5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π', '4G/LTE —Å–∫–æ—Ä–æ—Å—Ç—å', '–ì–æ—Ä—è—á–∞—è —Ç–æ—á–∫–∞'],
          users: '3-5'
        };
      }
      
      showScreen('purchaseScreen');
      renderPurchaseScreen();
    }
    
    function renderPurchaseScreen() {
      if (!selectedPlan) {
        selectedPlan = {
          name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
          data: '10GB',
          validity: 14,
          price: selectedCountry.price.min + (selectedCountry.price.max - selectedCountry.price.min) * 0.4,
        };
      }
      
      let planDetailsHtml = '';
      
      if (selectedPlanType === 'local') {
        planDetailsHtml = `
          <div style="margin-bottom: 12px;">
            <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–°—Ç—Ä–∞–Ω–∞:</div>
            <div style="font-weight: 600; font-size: 15px;">${selectedCountry.flag} ${selectedCountry.name}</div>
          </div>
        `;
      } else if (selectedPlanType === 'regional') {
        planDetailsHtml = `
          <div style="margin-bottom: 12px;">
            <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–†–µ–≥–∏–æ–Ω:</div>
            <div style="font-weight: 600; font-size: 15px;">${selectedPlan.name} (${selectedPlan.countries} —Å—Ç—Ä–∞–Ω)</div>
          </div>
        `;
      } else if (selectedPlanType === 'multi') {
        const countriesList = selectedMultiCountries.map(c => c.flag + ' ' + c.name).join(', ');
        planDetailsHtml = `
          <div style="margin-bottom: 12px;">
            <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–¢–∏–ø:</div>
            <div style="font-weight: 600; font-size: 15px;">–ú—É–ª—å—Ç–∏—Å—Ç—Ä–∞–Ω–æ–≤—ã–π (${selectedMultiCountries.length} –∏–∑ ${selectedPlan.maxCountries} —Å—Ç—Ä–∞–Ω)</div>
          </div>
          <div style="margin-bottom: 12px;">
            <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã:</div>
            <div style="font-weight: 600; font-size: 15px;">${countriesList}</div>
          </div>
        `;
      } else if (selectedPlanType === 'multiUser') {
        planDetailsHtml = `
          <div style="margin-bottom: 12px;">
            <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–¢–∏–ø:</div>
            <div style="font-weight: 600; font-size: 15px;">–°–µ–º–µ–π–Ω—ã–π –ø–ª–∞–Ω (${selectedPlan.users} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)</div>
          </div>
        `;
      }
      
      document.getElementById('planDetails').innerHTML = planDetailsHtml + `
        <div style="margin-bottom: 12px;">
          <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–ü–ª–∞–Ω:</div>
          <div style="font-weight: 600; font-size: 15px;">${selectedPlan.name}</div>
        </div>
        <div style="margin-bottom: 12px;">
          <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–î–∞–Ω–Ω—ã–µ:</div>
          <div style="font-weight: 600; font-size: 15px;">${selectedPlan.data}</div>
        </div>
        <div style="margin-bottom: 12px;">
          <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:</div>
          <div style="font-weight: 600; font-size: 15px;">${selectedPlan.validity} –¥–Ω–µ–π</div>
        </div>
        ${selectedPlan.countries ? `
        <div style="margin-bottom: 12px;">
          <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–°—Ç—Ä–∞–Ω—ã:</div>
          <div style="font-weight: 600; font-size: 15px;">${selectedPlan.countries} —Å—Ç—Ä–∞–Ω</div>
        </div>
        ` : ''}
        ${selectedPlan.users ? `
        <div style="margin-bottom: 12px;">
          <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</div>
          <div style="font-weight: 600; font-size: 15px;">${selectedPlan.users} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
        </div>
        ` : ''}
        <div>
          <div style="color: #666; margin-bottom: 4px; font-size: 13px;">–¶–µ–Ω–∞:</div>
          <div class="plan-price">${formatPrice(selectedPlan.price, selectedCountry.price.currency)}</div>
        </div>
      `;
      
      renderPaymentMethods('paymentMethods');
    }
    
    function renderPaymentMethods(containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = paymentMethods.map(method => `
        <div class="payment-method ${selectedPayment === method.id ? 'selected' : ''}" 
             onclick="selectPayment('${method.id}', '${containerId}')">
          <span class="payment-icon">${getPaymentIcon(method.icon)}</span>
          <span class="payment-text">${method.name}</span>
          ${selectedPayment === method.id ? '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2.5" style="flex-shrink: 0;"><path d="M20 6L9 17L4 12" stroke-linecap="round" stroke-linejoin="round"/></svg>' : ''}
        </div>
      `).join('');
    }
    
    function selectPayment(methodId, containerId) {
      selectedPayment = methodId;
      renderPaymentMethods(containerId);
      if (containerId === 'paymentMethodsModal') {
        document.getElementById('payBtn').disabled = false;
      } else {
        document.getElementById('buyBtn').disabled = false;
      }
    }
    
    function showPaymentModal() {
      if (!selectedPayment) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã');
        return;
      }
      document.getElementById('paymentModal').classList.add('active');
      renderPaymentMethods('paymentMethodsModal');
      if (selectedPayment) {
        document.getElementById('payBtn').disabled = false;
      }
    }
    
    function closePaymentModal() {
      document.getElementById('paymentModal').classList.remove('active');
    }
    
    function processPayment() {
      if (selectedPayment) {
        closePaymentModal();
        setTimeout(() => {
          document.getElementById('qrModal').classList.add('active');
        }, 500);
      }
    }
    
    function closeQRModal() {
      document.getElementById('qrModal').classList.remove('active');
    }
    
    function sharePurchase() {
      if (navigator.share) {
        navigator.share({
          title: `eSIM ${selectedCountry.name}`,
          text: `eSIM –¥–ª—è ${selectedCountry.name}\n\n–ü–ª–∞–Ω: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π\n–î–∞–Ω–Ω—ã–µ: 10GB\n\nQR-–∫–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.`,
        });
      } else {
        alert('–§—É–Ω–∫—Ü–∏—è —à–∞—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏');
      }
    }
    
    function completeInstallation() {
      closeQRModal();
      alert('–£—Å–ø–µ—à–Ω–æ! eSIM —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω');
      showScreen('ordersScreen');
    }
    
    function renderNewsScreen() {
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É Wi‚ÄëFi-—Ç–æ—á–µ–∫
      const mapContainer = document.getElementById('wifiMap');
      if (mapContainer) {
        if (!wifiMap) {
          wifiMap = L.map('wifiMap', {
            zoomControl: false,
          }).setView([30, 10], 2);
          
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap',
          }).addTo(wifiMap);
        } else {
          // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞, –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏–º —Ä–∞–∑–º–µ—Ä (–Ω–∞ —Å–ª—É—á–∞–π —Å–∫—Ä—ã—Ç–æ–≥–æ —ç–∫—Ä–∞–Ω–∞)
          setTimeout(() => {
            wifiMap.invalidateSize();
          }, 200);
        }
        
        // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –º–∞—Ä–∫–µ—Ä—ã
        wifiMarkers.forEach(m => wifiMap.removeLayer(m));
        wifiMarkers = [];
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫–∏
        wifiHotspots.forEach(spot => {
          const marker = L.circleMarker([spot.lat, spot.lng], {
            radius: 6,
            color: '#F97316',
            fillColor: '#F97316',
            fillOpacity: 0.9,
            weight: 2,
          }).addTo(wifiMap);
          
          marker.bindTooltip(
            `${spot.city}: ${spot.name}`,
            {direction: 'top', offset: [0, -6]}
          );
          
          wifiMarkers.push(marker);
        });
      }
    }
    
    function renderMapScreen() {
      const regions = [...new Set(countries.map(c => c.region))];
      const filtersContainer = document.getElementById('regionFilters');
      filtersContainer.innerHTML = `
        <div class="filter-chip ${!selectedRegion ? 'active' : ''}" onclick="setRegionFilter(null)">–í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã</div>
        ${regions.map(r => `
          <div class="filter-chip ${selectedRegion === r ? 'active' : ''}" onclick="setRegionFilter('${r}')">${r}</div>
        `).join('')}
      `;
      
      // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∫–∞—à–∏ –∏–∑ –º–∞—Ä–∫–µ—Ä–æ–≤
      const filteredAll = selectedRegion 
        ? countries.filter(c => c.region === selectedRegion)
        : countries;
      const filtered = filteredAll.filter(c => !String(c.id).startsWith('p')).slice(0, 80);
      
      document.getElementById('mapSectionTitle').textContent = `${filtered.length} ${filtered.length === 1 ? '—Å—Ç—Ä–∞–Ω–∞' : '—Å—Ç—Ä–∞–Ω'}`;
      
      const list = document.getElementById('mapCountriesList');
      list.innerHTML = filtered.map(country => {
        const inRoute = routeCountries.some(c => c.id === country.id);
        return `
          <div class="country-card ${inRoute ? 'selected' : ''}" 
               onclick="toggleRouteCountry('${country.id}')">
            <span class="flag">${country.flag}</span>
            <div class="country-info">
              <div class="country-name">${country.name}</div>
              <div class="country-region">${country.region}</div>
            </div>
            <div class="country-price">
              ${formatPrice(country.price.min, country.price.currency)}
              <span class="country-price-label">–æ—Ç</span>
            </div>
            ${inRoute ? '<svg class="checkmark" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2.5"><path d="M20 6L9 17L4 12" stroke-linecap="round" stroke-linejoin="round"/></svg>' : ''}
          </div>
        `;
      }).join('');
      
      renderMiniMap();
      updateRouteBanner();
    }
    
    function renderMiniMap() {
      const pointsSvg = document.getElementById('miniMapPoints');
      const routeSvg = document.getElementById('miniMapRoute');
      if (!pointsSvg || !routeSvg) return;
      
      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
      pointsSvg.innerHTML = '';
      routeSvg.innerHTML = '';
      
      // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –º–∏–Ω–∏-–∫–∞—Ä—Ç–∞ - –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ—á–∫–∏
      // –†–∏—Å—É–µ–º –ª–∏–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –Ω–∞ –º–∏–Ω–∏-–∫–∞—Ä—Ç–µ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
      if (routeCountries.length > 1) {
        let pathData = '';
        routeCountries.forEach((country, index) => {
          // –ü—Ä–æ–µ–∫—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –º–∏–Ω–∏-–∫–∞—Ä—Ç—ã (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è)
          const x = ((country.lng + 180) / 360) * 400;
          const y = ((90 - country.lat) / 180) * 200;
          if (index === 0) {
            pathData = `M ${x} ${y}`;
          } else {
            pathData += ` L ${x} ${y}`;
          }
        });
        routeSvg.innerHTML = `
          <path d="${pathData}" fill="none" stroke="#F97316" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" opacity="0.6" stroke-dasharray="3,3"/>
        `;
      }
      
      // –†–∏—Å—É–µ–º —Ç–æ—á–∫–∏ —Å—Ç—Ä–∞–Ω (–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ 80 –∏ –±–µ–∑ placeholder p*)
      const miniCountries = countries.filter(c => !String(c.id).startsWith('p')).slice(0, 80);
      pointsSvg.innerHTML = miniCountries.map(country => {
        const inRoute = routeCountries.some(c => c.id === country.id);
        // –ü—Ä–æ–µ–∫—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –º–∏–Ω–∏-–∫–∞—Ä—Ç—ã
        const x = ((country.lng + 180) / 360) * 400;
        const y = ((90 - country.lat) / 180) * 200;
        
        return `
          <circle cx="${x}" cy="${y}" r="${inRoute ? 5 : 3}" 
                  fill="${inRoute ? '#F97316' : '#4CAF50'}" 
                  stroke="white" 
                  stroke-width="1.5"
                  style="cursor: pointer; transition: all 0.2s;"
                  onmouseover="this.setAttribute('r', '${inRoute ? 6 : 4}')"
                  onmouseout="this.setAttribute('r', '${inRoute ? 5 : 3}')"/>
        `;
      }).join('');
    }
    
    function openFullMap() {
      const modal = document.getElementById('fullMapModal');
      if (modal) {
        modal.style.display = 'block';
        renderFullMap();
      }
    }
    
    function closeFullMap() {
      const modal = document.getElementById('fullMapModal');
      if (modal) {
        modal.style.display = 'none';
      }
      // –ù–µ —É–¥–∞–ª—è–µ–º –∫–∞—Ä—Ç—É, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
    }
    
    let mapSelectedCountries = [];
    let mapDragging = false;
    let mapTooltip = null;
    
    function renderFullMap() {
      mapSelectedCountries = [...routeCountries];
      updateMapSelection();
      
      const mapContainer = document.getElementById('fullMap');
      if (!mapContainer) return;
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É, –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞
      if (!map) {
        map = L.map('fullMap', {
          zoomControl: true,
          scrollWheelZoom: true,
          doubleClickZoom: true,
          boxZoom: true,
          keyboard: true,
          dragging: true,
          touchZoom: true
        }).setView([30, 0], 2);
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–π–ª—ã OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '¬© OpenStreetMap contributors',
          maxZoom: 19
        }).addTo(map);
      }
      
      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –º–∞—Ä–∫–µ—Ä—ã –∏ –ª–∏–Ω–∏–∏
      mapMarkers.forEach(marker => map.removeLayer(marker));
      mapMarkers = [];
      if (mapRouteLayer) {
        map.removeLayer(mapRouteLayer);
        mapRouteLayer = null;
      }
      
      // –†–∏—Å—É–µ–º –ª–∏–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞
      if (mapSelectedCountries.length > 1) {
        const routePoints = mapSelectedCountries.map(country => [country.lat, country.lng]);
        // –ó–∞–º—ã–∫–∞–µ–º –º–∞—Ä—à—Ä—É—Ç, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –±–æ–ª—å—à–µ 2 —Å—Ç—Ä–∞–Ω
        if (mapSelectedCountries.length > 2) {
          routePoints.push([mapSelectedCountries[0].lat, mapSelectedCountries[0].lng]);
        }
        mapRouteLayer = L.polyline(routePoints, {
          color: '#F97316',
          weight: 4,
          opacity: 0.7,
          dashArray: '10, 10'
        }).addTo(map);
      }
      
      // –°–æ–∑–¥–∞–µ–º –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω
      countries.forEach(country => {
        const isSelected = mapSelectedCountries.some(c => c.id === country.id);
        const priceText = formatPrice(country.price.min, country.price.currency);
        
        // –°–æ–∑–¥–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∏–∫–æ–Ω–∫—É —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ —Ü–µ–Ω–æ–π
        const iconHtml = `
          <div style="
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            pointer-events: auto;
            user-select: none;
            z-index: 1000;
          " onclick="window.selectCountryFromMap && window.selectCountryFromMap('${country.id}'); return false;" 
          onmousedown="event.stopPropagation(); return false;">
            <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã -->
            <div style="
              background: white;
              padding: 4px 8px;
              border-radius: 8px;
              font-size: 12px;
              font-weight: 700;
              color: #1A1A1A;
              margin-bottom: 4px;
              white-space: nowrap;
              box-shadow: 0 2px 6px rgba(0,0,0,0.2);
              border: 1px solid ${isSelected ? '#F97316' : '#4CAF50'};
            ">
              ${country.name}
            </div>
            <!-- –ú–∞—Ä–∫–µ—Ä -->
            <div style="
              width: ${isSelected ? '32px' : '24px'};
              height: ${isSelected ? '32px' : '24px'};
              background: ${isSelected ? '#F97316' : '#4CAF50'};
              border: 3px solid white;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              box-shadow: 0 2px 8px rgba(0,0,0,0.3);
              transition: all 0.3s;
            ">
              ${isSelected ? '<div style="width: 12px; height: 12px; background: white; border-radius: 50%;"></div>' : ''}
            </div>
            <!-- –¶–µ–Ω–∞ -->
            <div style="
              background: white;
              padding: 3px 6px;
              border-radius: 6px;
              font-size: 11px;
              font-weight: 600;
              color: ${isSelected ? '#F97316' : '#4CAF50'};
              margin-top: 4px;
              white-space: nowrap;
              box-shadow: 0 2px 6px rgba(0,0,0,0.2);
              border: 1px solid ${isSelected ? '#F97316' : '#4CAF50'};
            ">
              ${priceText}
            </div>
          </div>
        `;
        
        const customIcon = L.divIcon({
          html: iconHtml,
          className: 'custom-marker',
          iconSize: [120, 80],
          iconAnchor: [60, 40]
        });
        
        const marker = L.marker([country.lat, country.lng], { 
          icon: customIcon,
          interactive: true,
          bubblingMouseEvents: true,
          riseOnHover: true
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä –Ω–∞ –∫–∞—Ä—Ç—É –ü–ï–†–ï–î –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
        marker.addTo(map);
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –º–∞—Ä–∫–µ—Ä - –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π
        marker.on('click', function(e) {
          console.log('Marker click event:', country.name);
          e.originalEvent?.stopPropagation();
          e.originalEvent?.preventDefault();
          selectCountryFromMap(country.id);
          return false;
        });
        
        marker.on('mousedown', function(e) {
          console.log('Marker mousedown event:', country.name);
          e.originalEvent?.stopPropagation();
        });
        
        // –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ —Å–∞–º HTML —ç–ª–µ–º–µ–Ω—Ç –∏–∫–æ–Ω–∫–∏ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
        setTimeout(() => {
          const iconElement = marker._icon;
          if (iconElement) {
            iconElement.style.cursor = 'pointer';
            iconElement.onclick = function(e) {
              console.log('Icon element clicked:', country.name);
              e.stopPropagation();
              e.preventDefault();
              selectCountryFromMap(country.id);
              return false;
            };
            iconElement.addEventListener('click', function(e) {
              console.log('Icon addEventListener click:', country.name);
              e.stopPropagation();
              e.preventDefault();
              selectCountryFromMap(country.id);
              return false;
            }, true);
          }
        }, 100);
        
        // Tooltip –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
        marker.bindTooltip(`
          <div style="text-align: center; padding: 6px;">
            <div style="font-weight: 700; font-size: 13px; color: #1A1A1A;">${country.name}</div>
            <div style="font-weight: 600; font-size: 12px; color: #F97316;">${priceText}</div>
            <div style="font-size: 11px; color: #666; margin-top: 4px;">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</div>
          </div>
        `, {
          permanent: false,
          direction: 'top',
          offset: [0, -15],
          className: 'country-tooltip'
        });
        
        mapMarkers.push(marker);
      });
      
      // –ü–æ–¥–≥–æ–Ω—è–µ–º –∫–∞—Ä—Ç—É –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã
      if (mapSelectedCountries.length > 0) {
        const bounds = mapSelectedCountries.map(c => [c.lat, c.lng]);
        map.fitBounds(bounds, { padding: [50, 50] });
      } else {
        map.setView([30, 0], 2);
      }
    }
    
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è SVG –∫–∞—Ä—Ç—ã
    
    function toggleMapCountry(countryId) {
      const country = countries.find(c => c.id === countryId);
      if (!country) return;
      
      const index = mapSelectedCountries.findIndex(c => c.id === countryId);
      if (index > -1) {
        mapSelectedCountries.splice(index, 1);
      } else {
        if (mapSelectedCountries.length < 5) {
          mapSelectedCountries.push(country);
        } else {
          alert('–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º—É–º 5 —Å—Ç—Ä–∞–Ω');
          return;
        }
      }
      
      renderFullMap();
      updateMapSelection();
    }
    
    function selectCountryFromMap(countryId) {
      console.log('=== selectCountryFromMap called ===');
      console.log('Country ID:', countryId);
      
      const country = countries.find(c => c.id === countryId);
      if (!country) {
        console.error('Country not found:', countryId);
        alert('–°—Ç—Ä–∞–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
        return;
      }
      
      console.log('Selected country:', country);
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω—É
      selectedCountry = country;
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Ä—Ç—ã
      const modal = document.getElementById('fullMapModal');
      if (modal) {
        console.log('Closing modal');
        modal.style.display = 'none';
      }
      
      // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —ç–∫—Ä–∞–Ω —Ç–∞—Ä–∏—Ñ–æ–≤ —Å—Ä–∞–∑—É
      console.log('Switching to plansScreen');
      showScreen('plansScreen');
      
      // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
      setTimeout(() => {
        renderPlansScreen();
        console.log('Plans screen rendered');
      }, 50);
    }
    
    // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≥–ª–æ–±–∞–ª—å–Ω–æ–π –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ HTML
    window.selectCountryFromMap = selectCountryFromMap;
    
    function updateMapSelection() {
      const countEl = document.getElementById('mapSelectedCount');
      const namesEl = document.getElementById('mapSelectedNames');
      
      if (countEl) {
        countEl.textContent = mapSelectedCountries.length;
      }
      
      if (namesEl) {
        if (mapSelectedCountries.length === 0) {
          namesEl.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ';
        } else {
          const names = mapSelectedCountries.map(c => c.name).join(', ');
          namesEl.textContent = names.length > 40 ? names.substring(0, 40) + '...' : names;
        }
      }
    }
    
    function confirmMapSelection() {
      routeCountries = [...mapSelectedCountries];
      closeFullMap();
      renderMapScreen();
    }
    
    function setRegionFilter(region) {
      selectedRegion = region;
      renderMapScreen();
    }
    
    function toggleRouteCountry(countryId) {
      const country = countries.find(c => c.id === countryId);
      if (routeCountries.some(c => c.id === countryId)) {
        routeCountries = routeCountries.filter(c => c.id !== countryId);
      } else {
        routeCountries.push(country);
      }
      renderMapScreen();
    }
    
    function updateRouteBanner() {
      const banner = document.getElementById('routeBanner');
      const btn = document.getElementById('createRouteBtn');
      if (routeCountries.length > 0) {
        banner.style.display = 'flex';
        document.getElementById('routeText').textContent = 
          `–ú–∞—Ä—à—Ä—É—Ç: ${routeCountries.length} ${routeCountries.length === 1 ? '—Å—Ç—Ä–∞–Ω–∞' : '—Å—Ç—Ä–∞–Ω'}`;
        btn.style.display = 'block';
      } else {
        banner.style.display = 'none';
        btn.style.display = 'none';
      }
    }
    
    function clearRoute() {
      routeCountries = [];
      renderMapScreen();
    }
    
    function showCalculatorForRoute() {
      if (routeCountries.length === 0) {
        alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Ç—Ä–∞–Ω—É');
        return;
      }
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã
      selectedMultiCountries = routeCountries;
      selectedCountry = routeCountries[0];
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω —Ç–∞—Ä–∏—Ñ–æ–≤ —Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–º
      showScreen('plansScreen');
      renderPlansScreen();
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
      setTimeout(() => {
        showCalculatorTab();
      }, 100);
    }
    
    function createRoute() {
      showCalculatorForRoute();
    }
    
    function showPlansTab() {
      console.log('showPlansTab called');
      const plansTab = document.getElementById('plansTab');
      const calculatorTab = document.getElementById('calculatorTab');
      const plansBtn = document.getElementById('plansTabBtn');
      const calculatorBtn = document.getElementById('calculatorTabBtn');
      
      console.log('Elements:', { plansTab, calculatorTab, plansBtn, calculatorBtn });
      
      if (plansTab && calculatorTab && plansBtn && calculatorBtn) {
        plansTab.style.display = 'block';
        calculatorTab.style.display = 'none';
        plansBtn.classList.add('active');
        calculatorBtn.classList.remove('active');
        console.log('Plans tab shown');
      } else {
        console.error('Some elements not found');
      }
    }
    
    function showCalculatorTab() {
      console.log('showCalculatorTab called');
      const plansTab = document.getElementById('plansTab');
      const calculatorTab = document.getElementById('calculatorTab');
      const plansBtn = document.getElementById('plansTabBtn');
      const calculatorBtn = document.getElementById('calculatorTabBtn');
      
      console.log('Elements:', { plansTab, calculatorTab, plansBtn, calculatorBtn });
      
      if (plansTab && calculatorTab && plansBtn && calculatorBtn) {
        plansTab.style.display = 'none';
        calculatorTab.style.display = 'block';
        plansBtn.classList.remove('active');
        calculatorBtn.classList.add('active');
        console.log('Calculator tab shown');
      } else {
        console.error('Some elements not found');
      }
    }
    
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–∫–∞–∑–∞–º–∏
    function showOrderDetails(orderId) {
      showScreen('orderDetailsScreen');
    }
    
    function selectTopUp(type) {
      let topUpPlan = null;
      if (type === 'data') {
        topUpPlan = { name: '+2 GB', price: 9.99, type: 'data' };
      } else if (type === 'days') {
        topUpPlan = { name: '+7 –¥–Ω–µ–π', price: 4.99, type: 'days' };
      } else if (type === 'combo') {
        topUpPlan = { name: '+2 GB + 7 –¥–Ω–µ–π', price: 12.99, type: 'combo' };
      }
      
      if (topUpPlan) {
        selectedPlan = topUpPlan;
        showScreen('purchaseScreen');
        renderPurchaseScreen();
      }
    }
    
    function shareOrder() {
      if (navigator.share) {
        navigator.share({
          title: '–ú–æ–π eSIM –∑–∞–∫–∞–∑',
          text: '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è QR-–∫–æ–¥–æ–º –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ eSIM',
          url: window.location.href
        }).catch(err => console.log('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:', err));
      } else {
        alert('QR-–∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
      }
    }
    
    function downloadQR() {
      alert('–§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è QR-–∫–æ–¥–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞');
    }
    
    function contactSupport() {
      alert('–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏: support@yesim.app\n–ú—ã –æ—Ç–≤–µ—Ç–∏–º –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ.');
    }

    function calculateOwnOperatorTariff() {
      const nameEl = document.getElementById('ownOperatorName');
      const priceEl = document.getElementById('ownOperatorPrice');
      const dataEl = document.getElementById('ownOperatorData');
      const usageEl = document.getElementById('ownOperatorUsage');
      const resultBlock = document.getElementById('ownOperatorResult');
      const resultText = document.getElementById('ownOperatorResultText');

      if (!nameEl || !priceEl || !dataEl || !usageEl || !resultBlock || !resultText) return;

      const price = parseFloat(priceEl.value || '0');
      const data = parseFloat(dataEl.value || '0');
      const usage = parseFloat(usageEl.value || '0');

      if (!price || !data || !usage) {
        alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å, –ì–ë –≤ –ø–∞–∫–µ—Ç–µ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ.');
        return;
      }

      const pricePerGb = price / data;
      // –£—Å–ª–æ–≤–Ω—ã–π ¬´—Å—Ä–µ–¥–Ω–∏–π¬ª eSIM –ø–æ –º–∏—Ä—É ‚Äî –±–µ—Ä—ë–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –∏–∑ —Å—Ç—Ä–∞–Ω –∏ –¥–µ–ª–∏–º –Ω–∞ 5GB
      const sampleCountry = countries[0];
      const esimPricePerGb = sampleCountry ? (sampleCountry.price.min / 5) : pricePerGb;

      let message = '';
      if (pricePerGb > esimPricePerGb * 1.2) {
        message = '–í–∞—à –Ω—ã–Ω–µ—à–Ω–∏–π –ø–∞–∫–µ—Ç –¥–æ—Ä–æ–∂–µ —Ç–∏–ø–∏—á–Ω–æ–≥–æ eSIM –∑–∞ –ì–ë. –ü—Ä–∏ –ø–æ–µ–∑–¥–∫–∞—Ö –≤—ã–≥–æ–¥–Ω–µ–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ eSIM‚Äë–ø–∞–∫–µ—Ç—ã –≤–º–µ—Å—Ç–æ —Ä–æ—É–º–∏–Ω–≥–∞.';
      } else if (pricePerGb < esimPricePerGb * 0.8) {
        message = '–í–∞—à –ø–∞–∫–µ—Ç –ø–æ —Ü–µ–Ω–µ –∑–∞ –ì–ë –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π. –ù–æ –≤ —Ä–æ—É–º–∏–Ω–≥–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–≥–æ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π eSIM –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö.';
      } else {
        message = '–°—Ç–æ–∏–º–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –ø–∞–∫–µ—Ç–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º–∞ —Å eSIM. –ú—ã –º–æ–∂–µ–º –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å, –≥–¥–µ –≤—ã–≥–æ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å eSIM, –∏—Å—Ö–æ–¥—è –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω –ø–æ–µ–∑–¥–æ–∫.';
      }

      resultText.textContent = message;
      resultBlock.style.display = 'block';
    }
    
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é
    window.toggleBurgerMenu = function() {
      console.log('toggleBurgerMenu called');
      const menu = document.getElementById('burgerMenu');
      const overlay = document.getElementById('burgerOverlay');
      console.log('Menu element:', menu);
      console.log('Overlay element:', overlay);
      if (menu && overlay) {
        menu.classList.toggle('active');
        overlay.classList.toggle('active');
        console.log('Menu active:', menu.classList.contains('active'));
      } else {
        console.error('Menu or overlay not found!');
      }
    };
    
    window.closeBurgerMenu = function() {
      const menu = document.getElementById('burgerMenu');
      const overlay = document.getElementById('burgerOverlay');
      if (menu && overlay) {
        menu.classList.remove('active');
        overlay.classList.remove('active');
      }
    };
    
    window.openTravelServices = function() {
      closeBurgerMenu();
      showScreen('travelServicesScreen');
    };
    
    window.openOwnOperator = function() {
      closeBurgerMenu();
      showScreen('ownOperatorScreen');
    };
    
    window.openMyTrips = function() {
      closeBurgerMenu();
      showScreen('myTripsScreen');
    };
    
    window.selectESIMForTrip = function(country, city) {
      // –ù–∞—Ö–æ–¥–∏–º —Å—Ç—Ä–∞–Ω—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ –∫–æ–¥—É
      let targetCountry = null;
      if (country === 'france' || city === 'paris') {
        targetCountry = countries.find(c => c.name === '–§—Ä–∞–Ω—Ü–∏—è' || c.code === 'FR');
      }
      
      if (targetCountry) {
        selectedCountry = targetCountry;
        showScreen('plansScreen');
        renderPlansScreen();
      } else {
        // –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω
        showScreen('homeScreen');
        alert('–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ eSIM');
      }
    };
    
    // –ê–ª–∏–∞—Å—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ - –¥–µ–ª–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏
    window.toggleBurgerMenu = window.toggleBurgerMenu || function() {
      console.log('toggleBurgerMenu called');
      const menu = document.getElementById('burgerMenu');
      const overlay = document.getElementById('burgerOverlay');
      if (menu && overlay) {
        menu.classList.toggle('active');
        overlay.classList.toggle('active');
      }
    };
    
    window.closeBurgerMenu = window.closeBurgerMenu || function() {
      const menu = document.getElementById('burgerMenu');
      const overlay = document.getElementById('burgerOverlay');
      if (menu && overlay) {
        menu.classList.remove('active');
        overlay.classList.remove('active');
      }
    };
    
    window.openTravelServices = window.openTravelServices || function() {
      closeBurgerMenu();
      showScreen('travelServicesScreen');
    };
    
    window.openOwnOperator = window.openOwnOperator || function() {
      closeBurgerMenu();
      showScreen('ownOperatorScreen');
    };
    
    window.openMyTrips = window.openMyTrips || function() {
      closeBurgerMenu();
      showScreen('myTripsScreen');
    };
    
    window.selectESIMForTrip = window.selectESIMForTrip || function(country, city) {
      // –ù–∞—Ö–æ–¥–∏–º —Å—Ç—Ä–∞–Ω—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ –∫–æ–¥—É
      let targetCountry = null;
      if (country === 'france' || city === 'paris') {
        targetCountry = countries.find(c => c.name === '–§—Ä–∞–Ω—Ü–∏—è' || c.code === 'FR');
      }
      
      if (targetCountry) {
        selectedCountry = targetCountry;
        showScreen('plansScreen');
        renderPlansScreen();
      } else {
        // –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω
        showScreen('homeScreen');
        alert('–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ eSIM');
      }
    };
    
    // –¢–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ window –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    function toggleBurgerMenu() { 
      if (window.toggleBurgerMenu) {
        window.toggleBurgerMenu();
      }
    }
    
    function closeBurgerMenu() { 
      if (window.closeBurgerMenu) {
        window.closeBurgerMenu();
      }
    }
    
    function openTravelServices() { 
      if (window.openTravelServices) {
        window.openTravelServices();
      }
    }
    
    function openOwnOperator() { 
      if (window.openOwnOperator) {
        window.openOwnOperator();
      }
    }
    
    function openMyTrips() {
      if (window.openMyTrips) {
        window.openMyTrips();
      }
    }
    
    function selectESIMForTrip(country, city) {
      if (window.selectESIMForTrip) {
        window.selectESIMForTrip(country, city);
      }
    }
    
    // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ HTML - –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ä–∞–∑—É –≤ –Ω–∞—á–∞–ª–µ
    window.showPlansTab = function() {
      console.log('showPlansTab called');
      const plansTab = document.getElementById('plansTab');
      const calculatorTab = document.getElementById('calculatorTab');
      const plansBtn = document.getElementById('plansTabBtn');
      const calculatorBtn = document.getElementById('calculatorTabBtn');
      
      console.log('Elements found:', { plansTab: !!plansTab, calculatorTab: !!calculatorTab, plansBtn: !!plansBtn, calculatorBtn: !!calculatorBtn });
      
      if (plansTab && calculatorTab && plansBtn && calculatorBtn) {
        plansTab.style.display = 'block';
        calculatorTab.style.display = 'none';
        plansBtn.classList.add('active');
        calculatorBtn.classList.remove('active');
        console.log('Plans tab activated');
      } else {
        console.error('Missing elements');
      }
    };
    
    window.showCalculatorTab = function() {
      console.log('showCalculatorTab called');
      const plansTab = document.getElementById('plansTab');
      const calculatorTab = document.getElementById('calculatorTab');
      const plansBtn = document.getElementById('plansTabBtn');
      const calculatorBtn = document.getElementById('calculatorTabBtn');
      
      console.log('Elements found:', { plansTab: !!plansTab, calculatorTab: !!calculatorTab, plansBtn: !!plansBtn, calculatorBtn: !!calculatorBtn });
      
      if (plansTab && calculatorTab && plansBtn && calculatorBtn) {
        plansTab.style.display = 'none';
        calculatorTab.style.display = 'block';
        plansBtn.classList.remove('active');
        calculatorBtn.classList.add('active');
        console.log('Calculator tab activated');
      } else {
        console.error('Missing elements');
      }
    };
    
    // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏
    window.showOrderDetails = showOrderDetails;
    window.selectTopUp = selectTopUp;
    window.shareOrder = shareOrder;
    window.downloadQR = downloadQR;
    window.contactSupport = contactSupport;
    window.calculateOwnOperatorTariff = calculateOwnOperatorTariff;
    
    function showMyTariff() {
      const dataSelect = document.getElementById('calcData');
      const validitySelect = document.getElementById('calcValidity');
      const myTariffBlock = document.getElementById('myTariffBlock');
      const myTariffName = document.getElementById('myTariffName');
      const myTariffPrice = document.getElementById('myTariffPrice');
      
      if (!selectedCountry || !dataSelect || !validitySelect || !myTariffBlock || !myTariffName || !myTariffPrice) {
        alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–∞—Ä–∏—Ñ–∞');
        return;
      }
      
      const selectedData = dataSelect.value;
      const selectedValidity = parseInt(validitySelect.value);
      const basePrice = selectedCountry.price.min;
      const dataMultiplier = selectedData === 'unlimited' ? 3 : Math.max(1, parseFloat(selectedData) / 5);
      const validityMultiplier = Math.max(1, selectedValidity / 14);
      const price = basePrice * dataMultiplier * validityMultiplier;
      
      myTariffName.textContent = `${selectedData === 'unlimited' ? '–ë–µ–∑–ª–∏–º–∏—Ç' : selectedData + 'GB'} ‚Ä¢ ${selectedValidity} –¥–Ω–µ–π`;
      myTariffPrice.textContent = formatPrice(price, selectedCountry.price.currency);
      myTariffBlock.style.display = 'block';
    }
    
    function calculatePlans() {
      const dataSelect = document.getElementById('calcData');
      const validitySelect = document.getElementById('calcValidity');
      const calculatedPlansContainer = document.getElementById('calculatedPlans');
      
      if (!dataSelect || !validitySelect || !calculatedPlansContainer) return;
      
      const selectedData = dataSelect.value;
      const selectedValidity = parseInt(validitySelect.value);
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
      const calculatedPlans = [];
      
      if (selectedCountry) {
        const basePrice = selectedCountry.price.min;
        
        // –ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω
        calculatedPlans.push({
          name: '–ë–∞–∑–æ–≤—ã–π',
          data: selectedData === 'unlimited' ? '–ë–µ–∑–ª–∏–º–∏—Ç' : selectedData + 'GB',
          validity: selectedValidity,
          price: basePrice * (selectedData === 'unlimited' ? 2 : parseFloat(selectedData) / 5),
          currency: selectedCountry.price.currency,
          description: '–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–µ–∑–¥–æ–∫'
        });
        
        // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–ª–∞–Ω
        if (selectedData !== 'unlimited' && parseFloat(selectedData) >= 5) {
          calculatedPlans.push({
            name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
            data: selectedData + 'GB',
            validity: selectedValidity,
            price: basePrice * (parseFloat(selectedData) / 5) * 1.2,
            currency: selectedCountry.price.currency,
            description: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä',
            popular: true
          });
        }
        
        // –ü—Ä–µ–º–∏—É–º –ø–ª–∞–Ω
        if (selectedData === 'unlimited' || parseFloat(selectedData) >= 20) {
          calculatedPlans.push({
            name: '–ü—Ä–µ–º–∏—É–º',
            data: selectedData === 'unlimited' ? '–ë–µ–∑–ª–∏–º–∏—Ç' : selectedData + 'GB',
            validity: selectedValidity,
            price: basePrice * (selectedData === 'unlimited' ? 3 : parseFloat(selectedData) / 5 * 1.8),
            currency: selectedCountry.price.currency,
            description: '–î–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–∫'
          });
        }
      }
      
      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã
      if (calculatedPlans.length > 0) {
        calculatedPlansContainer.innerHTML = calculatedPlans.map(plan => `
          <div class="card" style="margin-bottom: 12px; cursor: pointer;" onclick="selectPlanFromCalculator(${JSON.stringify(plan).replace(/"/g, '&quot;')})">
            ${plan.popular ? '<div style="background: #F97316; color: white; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600; display: inline-block; margin-bottom: 8px;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>' : ''}
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
              <div>
                <div style="font-size: 18px; font-weight: 700; color: #1A1A1A; margin-bottom: 4px;">${plan.name}</div>
                <div style="font-size: 13px; color: #666;">${plan.description}</div>
              </div>
              <div style="text-align: right;">
                <div style="font-size: 22px; font-weight: 700; color: #F97316;">${formatPrice(plan.price, plan.currency)}</div>
              </div>
            </div>
            <div style="display: flex; gap: 12px; margin-top: 12px; padding-top: 12px; border-top: 1px solid #E5E5E5;">
              <div style="font-size: 12px; color: #666;">
                <span style="font-weight: 600; color: #1A1A1A;">${plan.data}</span> –¥–∞–Ω–Ω—ã—Ö
              </div>
              <div style="font-size: 12px; color: #666;">
                <span style="font-weight: 600; color: #1A1A1A;">${plan.validity}</span> –¥–Ω–µ–π
              </div>
            </div>
          </div>
        `).join('');
      } else {
        calculatedPlansContainer.innerHTML = '<div class="card" style="text-align: center; padding: 40px; color: #666;">–¢–∞—Ä–∏—Ñ—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
      }
    }
    
    function selectPlanFromCalculator(planData) {
      // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –ø–ª–∞–Ω–∞ –∏–∑ –¥–∞–Ω–Ω—ã—Ö –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
      selectedPlan = {
        id: 'calc-' + Date.now(),
        name: planData.name,
        data: planData.data,
        validity: planData.validity,
        price: planData.price,
        currency: planData.currency,
        description: planData.description
      };
      
      // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–∫—É–ø–∫–∏
      showScreen('purchaseScreen');
      renderPurchaseScreen();
    }
    
    // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏
    window.calculatePlans = calculatePlans;
    window.selectPlanFromCalculator = selectPlanFromCalculator;
    window.showMyTariff = showMyTariff;
    
    function setArchiveFilter(filter, element) {
      document.querySelectorAll('#archiveScreen .filter-chip').forEach(chip => {
        chip.classList.remove('active');
      });
      element.classList.add('active');
    }
    
    document.getElementById('searchInput')?.addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      const suggestionsEl = document.getElementById('searchSuggestions');
      
      if (query === '') {
        filteredCountries = [...countries];
        if (suggestionsEl) suggestionsEl.classList.remove('show');
      } else {
        filteredCountries = countries.filter(c => 
          c.name.toLowerCase().includes(query) || 
          c.region.toLowerCase().includes(query)
        );
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
        if (suggestionsEl) {
          const suggestions = countries.filter(c => 
            c.name.toLowerCase().includes(query) || 
            c.region.toLowerCase().includes(query)
          ).slice(0, 5); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–∞–∫—Å–∏–º—É–º 5 –ø–æ–¥—Å–∫–∞–∑–æ–∫
          
          if (suggestions.length > 0) {
            suggestionsEl.innerHTML = suggestions.map(country => `
              <div class="suggestion-item" onclick="selectCountryFromSuggestion('${country.id}')">
                <span class="flag">${country.flag}</span>
                <span class="suggestion-name">${country.name}</span>
                <span class="suggestion-region">${country.region}</span>
              </div>
            `).join('');
            suggestionsEl.classList.add('show');
          } else {
            suggestionsEl.classList.remove('show');
          }
        }
      }
      renderCountries();
    });
    
    function selectCountryFromSuggestion(countryId) {
      const suggestionsEl = document.getElementById('searchSuggestions');
      if (suggestionsEl) suggestionsEl.classList.remove('show');
      const input = document.getElementById('searchInput');
      if (input) input.value = '';
      selectCountry(countryId);
    }
    
    function selectCountryFromMapSuggestion(countryId) {
      const suggestionsEl = document.getElementById('mapSearchSuggestions');
      if (suggestionsEl) suggestionsEl.classList.remove('show');
      const input = document.getElementById('mapSearchInput');
      if (input) input.value = '';
      selectCountryFromMap(countryId);
    }
    
    function selectCountryFromMultiSuggestion(countryId) {
      const suggestionsEl = document.getElementById('multiSearchSuggestions');
      if (suggestionsEl) suggestionsEl.classList.remove('show');
      const input = document.getElementById('multiSearchInput');
      if (input) input.value = '';
      toggleRouteCountry(countryId);
    }
    
    // –°–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –ø–æ–ª—è –ø–æ–∏—Å–∫–∞
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.search-wrapper')) {
        document.querySelectorAll('.search-suggestions').forEach(el => {
          el.classList.remove('show');
        });
      }
    });
    
    document.getElementById('mapSearchInput')?.addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      const suggestionsEl = document.getElementById('mapSearchSuggestions');
      
      const filtered = (selectedRegion 
        ? countries.filter(c => c.region === selectedRegion)
        : countries).filter(c => 
        c.name.toLowerCase().includes(query) || 
        c.region.toLowerCase().includes(query)
      );
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
      if (suggestionsEl && query !== '') {
        const suggestions = filtered.slice(0, 5);
        if (suggestions.length > 0) {
          suggestionsEl.innerHTML = suggestions.map(country => `
            <div class="suggestion-item" onclick="selectCountryFromMapSuggestion('${country.id}')">
              <span class="flag">${country.flag}</span>
              <span class="suggestion-name">${country.name}</span>
              <span class="suggestion-region">${country.region}</span>
            </div>
          `).join('');
          suggestionsEl.classList.add('show');
        } else {
          suggestionsEl.classList.remove('show');
        }
      } else if (suggestionsEl) {
        suggestionsEl.classList.remove('show');
      }
      
      document.getElementById('mapSectionTitle').textContent = `${filtered.length} ${filtered.length === 1 ? '—Å—Ç—Ä–∞–Ω–∞' : '—Å—Ç—Ä–∞–Ω'}`;
      const list = document.getElementById('mapCountriesList');
      list.innerHTML = filtered.map(country => {
        const inRoute = routeCountries.some(c => c.id === country.id);
        return `
          <div class="country-card ${inRoute ? 'selected' : ''}" 
               onclick="toggleRouteCountry('${country.id}')">
            <span class="flag">${country.flag}</span>
            <div class="country-info">
              <div class="country-name">${country.name}</div>
              <div class="country-region">${country.region}</div>
            </div>
            <div class="country-price">
              ${formatPrice(country.price.min, country.price.currency)}
              <span class="country-price-label">–æ—Ç</span>
            </div>
            ${inRoute ? '<svg class="checkmark" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2.5"><path d="M20 6L9 17L4 12" stroke-linecap="round" stroke-linejoin="round"/></svg>' : ''}
          </div>
        `;
      }).join('');
    });
    
    document.getElementById('multiSearchInput')?.addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      const suggestionsEl = document.getElementById('multiSearchSuggestions');
      
      const filtered = countries.filter(c => 
        c.name.toLowerCase().includes(query) ||
        c.region.toLowerCase().includes(query)
      );
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
      if (suggestionsEl && query !== '') {
        const suggestions = filtered.slice(0, 5);
        if (suggestions.length > 0) {
          suggestionsEl.innerHTML = suggestions.map(country => `
            <div class="suggestion-item" onclick="selectCountryFromMultiSuggestion('${country.id}')">
              <span class="flag">${country.flag}</span>
              <span class="suggestion-name">${country.name}</span>
              <span class="suggestion-region">${country.region}</span>
            </div>
          `).join('');
          suggestionsEl.classList.add('show');
        } else {
          suggestionsEl.classList.remove('show');
        }
      } else if (suggestionsEl) {
        suggestionsEl.classList.remove('show');
      }
      document.getElementById('multiSectionTitle').textContent = `${filtered.length} ${filtered.length === 1 ? '—Å—Ç—Ä–∞–Ω–∞' : '—Å—Ç—Ä–∞–Ω'}`;
      const list = document.getElementById('multiCountriesList');
      list.innerHTML = filtered.map(country => {
        const isSelected = selectedMultiCountries.some(c => c.id === country.id);
        const canSelect = selectedMultiCountries.length < selectedPlan.maxCountries;
        return `
          <div class="country-card ${isSelected ? 'selected' : ''} ${!isSelected && !canSelect ? 'style="opacity: 0.5; cursor: not-allowed;"' : ''}" 
               onclick="${!isSelected && !canSelect ? '' : `toggleMultiCountry('${country.id}')`}">
            <span class="flag">${country.flag}</span>
            <div class="country-info">
              <div class="country-name">${country.name}</div>
              <div class="country-region">${country.region}</div>
            </div>
            <div class="country-price">
              ${formatPrice(country.price.min, country.price.currency)}
              <span class="country-price-label">–æ—Ç</span>
            </div>
            ${isSelected ? '<svg class="checkmark" viewBox="0 0 24 24" fill="none" stroke="#F97316" stroke-width="2.5"><path d="M20 6L9 17L4 12" stroke-linecap="round" stroke-linejoin="round"/></svg>' : ''}
          </div>
        `;
      }).join('');
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    function initApp() {
      try {
        filteredCountries = [...countries];
        renderCountries();
        
        // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã
        console.log('Functions available:', {
          showPlansTab: typeof window.showPlansTab,
          showCalculatorTab: typeof window.showCalculatorTab
        });
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
      }
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initApp);
    } else {
      initApp();
    }
  </script>
</body>
</html>
